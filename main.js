/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ObsidianNoteLog
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default",
  logFilePath: "",
  dailyNoteFormat: "YYYY-MM-DD [LOG]",
  logLinks: false
};
var ObsidianNoteLog = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.leafFiles = [];
  }
  //this.app.command.g
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      this.registerGeneralEvents();
      this.initialiseLeafFile();
      this.logLeafChanges(false, this.processLeaves(false));
      this.registerOpenCloseEvents();
    });
  }
  onunload() {
    this.initialiseLeafFile();
    this.logLeafChanges(true, this.processLeaves(true));
    this.writeChangelog(this.ObsidianStopLog());
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // #endregion
  // #region 
  registerGeneralEvents() {
    let logfile = window.moment().format(this.settings.logFilePath);
    this.writeChangelog(this.ObsidianStartLog());
    this.registerEvent(this.app.vault.on("create", (file) => {
      this.writeChangelog(this.FileCreateLog(file.path));
    }));
    this.registerEvent(this.app.vault.on("rename", (file, oldName) => {
      this.writeChangelog(this.FileMoveLog(file.path, oldName));
    }));
    this.registerEvent(this.app.vault.on("modify", (file) => {
      if (file.path != logfile) {
        this.writeChangelog(this.FileModifyLog(file.path));
      }
    }));
    this.registerEvent(this.app.vault.on("delete", (file) => {
      this.writeChangelog(this.FileDeleteLog(file.path));
    }));
    this.registerEvent(this.app.workspace.on("quit", () => {
      this.initialiseLeafFile();
      this.logLeafChanges(true, this.processLeaves(true));
      this.writeChangelog(this.ObsidianStopLog());
    }));
  }
  registerOpenCloseEvents() {
    let hover = /* @__PURE__ */ new Map();
    const debouncedActiveLeafChange = (0, import_obsidian.debounce)(() => {
      this.initialiseLeafFile();
      this.logLeafChanges(false, this.processLeaves(false));
    }, 100);
    this.registerEvent(this.app.workspace.on("active-leaf-change", (leaf) => {
      this.initialiseLeafFile();
      if (leaf !== void 0) {
        let newActiveIndex = this.leafFiles.findIndex((leafdata) => leafdata.curLeaf === leaf);
        let lastActive = this.leafFiles.find((leafdata) => leafdata.active === true);
        let lastActiveIndex = this.leafFiles.findIndex((leafdata) => leafdata.active === true);
        this.leafFiles[newActiveIndex].active = true;
        if (lastActive !== void 0) {
          this.leafFiles[lastActiveIndex].active = false;
          this.leafFiles[newActiveIndex].lastLeaf = lastActive.curLeaf;
        }
      } else {
      }
    }));
    this.registerEvent(this.app.workspace.on("layout-change", () => {
      debouncedActiveLeafChange();
    }));
    this.registerEvent(this.app.workspace.on("resize", () => {
      debouncedActiveLeafChange();
    }));
    this.registerEvent(this.app.workspace.on("file-open", (file) => {
      debouncedActiveLeafChange();
    }));
  }
  // #endregion
  // #region LeafFile Functions
  /*
  get all the leaves that currently exist and are viewable and add them to array, if they aren't in there yet, then add them newly, with initialised values
  */
  initialiseLeafFile() {
    let allLeaves = this.getVisibleLeaves(this.getLeafsInWorkspace());
    for (let leaf = 0; leaf < allLeaves.length; leaf++) {
      let thisLeaf = allLeaves[leaf];
      let thisLeafData = this.leafFiles.find((leafdata) => leafdata.curLeaf === thisLeaf);
      if (thisLeafData === void 0) {
        let newLeaf = {
          curLeaf: thisLeaf,
          lastLeaf: void 0,
          curFile: void 0,
          curType: "empty",
          prevFile: void 0,
          prevType: "empty",
          active: false,
          logged: [true, true],
          inview: true
          //:false
        };
        this.leafFiles.push(newLeaf);
      }
    }
  }
  /*
  if a leaf has changed from how it was before, update the details stored about that leaf
  */
  processLeaves(end) {
    var _a, _b, _c, _d, _e;
    let allLeaves = this.getLeafsInWorkspace();
    let visibleLeaves = this.getVisibleLeaves(allLeaves);
    let deleteLeafFile = [];
    let occcurences = this.getOpenFileInstances(visibleLeaves);
    for (let leaf = 0; leaf < this.leafFiles.length; leaf++) {
      let leafdata = this.leafFiles[leaf];
      let viewable = visibleLeaves.find((visibleLeaf) => visibleLeaf === leafdata.curLeaf);
      if (leafdata.curFile !== ((_a = leafdata.curLeaf.getViewState()) == null ? void 0 : _a.state.file) || leafdata.curType != leafdata.curLeaf.getViewState().type || leafdata.inview === true && viewable === void 0 || leafdata.inview === false && viewable !== void 0 || end === true) {
        leafdata.logged = [true, true];
        let newFileOccurence = this.leafFiles.find((leafData) => {
          var _a2, _b2;
          return leafData.curFile === ((_a2 = leafdata.curLeaf.getViewState()) == null ? void 0 : _a2.state.file) && leafData.inview === true && leafData.curType === "markdown" && ((_b2 = leafdata.curLeaf.getViewState()) == null ? void 0 : _b2.type) === "markdown";
        });
        if (newFileOccurence === void 0 && ((_b = leafdata.curLeaf.getViewState()) == null ? void 0 : _b.type) == "markdown" && (leafdata.curFile !== ((_c = leafdata.curLeaf.getViewState().state) == null ? void 0 : _c.file) || leafdata.inview === false)) {
          leafdata.logged[0] = false;
          leafdata.inview = true;
        }
        if ((leafdata.curFile !== void 0 && occcurences.get(leafdata.curFile) === void 0 || viewable === void 0) && leafdata.curType == "markdown") {
          leafdata.inview = false;
          let oldFileOccurence = this.leafFiles.find((leafData) => leafData.curFile === leafdata.curFile && leafData.inview === true);
          if (oldFileOccurence === void 0) {
            leafdata.logged[1] = false;
            if (viewable === void 0) {
              deleteLeafFile.push(leaf);
            }
          }
        }
        if (end === true) {
          if (leafdata.curFile !== void 0 && occcurences.get(leafdata.curFile) !== void 0) {
            leafdata.prevFile = leafdata.curFile;
            leafdata.prevType = leafdata.curType;
            leafdata.curFile = (_d = leafdata.curLeaf.getViewState().state) == null ? void 0 : _d.file;
            leafdata.curType = leafdata.curLeaf.getViewState().type;
            occcurences.set(leafdata.curFile, void 0);
          }
        } else if (end === false) {
          leafdata.prevFile = leafdata.curFile;
          leafdata.prevType = leafdata.curType;
          leafdata.curFile = (_e = leafdata.curLeaf.getViewState().state) == null ? void 0 : _e.file;
          leafdata.curType = leafdata.curLeaf.getViewState().type;
        }
      }
    }
    return deleteLeafFile;
  }
  /*
  Check all the changes that have been recorded for needing updates, and then output the result of that
  */
  logLeafChanges(end, deletedLeaf) {
    for (let leaf = 0; leaf < this.leafFiles.length; leaf++) {
      let leafdata = this.leafFiles[leaf];
      if (end === true && leafdata.inview === true && leafdata.prevType === "markdown") {
        leafdata.logged[1] = false;
        leafdata.inview = false;
      }
      if (leafdata.logged[1] === false && leafdata.prevFile !== void 0) {
        this.writeChangelog(this.FileCloseLog(leafdata.prevFile));
        leafdata.logged[1] = true;
      }
      if (leafdata.logged[0] === false && leafdata.curFile !== void 0) {
        this.writeChangelog(this.FileOpenLog(leafdata.curFile, this.leafFiles.find((data) => data.curLeaf === leafdata.lastLeaf)));
        leafdata.logged[0] = true;
      }
    }
    for (let data = deletedLeaf.length - 1; data > -1; data--) {
      this.leafFiles.splice(deletedLeaf[data], 1);
    }
  }
  //#endregion 
  // #region File Writing
  //Log building Logic
  async writeInFile(filePath, content) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile) {
      await this.app.vault.append(file, content);
    } else {
      new import_obsidian.Notice("Couldn't write Note log: check the file path, file might not exist");
    }
  }
  buildChangelog(logText) {
    let logFormat = "[[date::] YYYY-MM-DD[]] [at] [[time::] HH:mm:ss[]] [[timezone::]Z[]]";
    let changelogContent = ``;
    const humanTime = window.moment().format(logFormat);
    changelogContent += `- ${humanTime} \xB7 ${logText}
`;
    return changelogContent;
  }
  async writeChangelog(logText) {
    const log = this.buildChangelog(logText);
    let file = window.moment().format(this.settings.logFilePath);
    await this.writeInFile(file, log);
  }
  // #endregion
  //Open and Closing 
  //still have not factured in hover open notes
  getLeafsInWorkspace() {
    let leafsInWorkspace = [];
    leafsInWorkspace = this.app.workspace.getLeavesOfType("markdown");
    return leafsInWorkspace;
  }
  getVisibleLeaves(leafs) {
    var _a, _b, _c, _d;
    let visibleLeafs = [];
    for (let leaf = 0; leaf < leafs.length; leaf++) {
      let leafStyle = (_a = leafs[leaf].view.containerEl.parentElement) == null ? void 0 : _a.style.display;
      let mainSplit = (_d = (_c = (_b = leafs[leaf].view.containerEl.parentElement) == null ? void 0 : _b.parentElement) == null ? void 0 : _c.parentElement) == null ? void 0 : _d.parentElement;
      if ((mainSplit == null ? void 0 : mainSplit.className.includes("mod-left-split")) && mainSplit.style.display == "none") {
      } else if ((mainSplit == null ? void 0 : mainSplit.className.includes("mod-right-split")) && mainSplit.style.display == "none") {
      } else if (leafStyle == "none") {
      } else if (leafs[leaf] == void 0) {
      } else {
        visibleLeafs.push(leafs[leaf]);
      }
    }
    return visibleLeafs;
  }
  getOpenFileInstances(leaves) {
    var _a;
    let fileInstances = /* @__PURE__ */ new Map([]);
    for (let leaf = 0; leaf < leaves.length; leaf++) {
      const file = (_a = leaves[leaf].getViewState().state) == null ? void 0 : _a.file;
      const type = leaves[leaf].getViewState().type;
      if (fileInstances.has(file) && file != void 0 && type == "markdown") {
        let num = fileInstances.get(file) + 1;
        fileInstances.delete(file);
        fileInstances.set(file, num);
      } else if (file != void 0) {
        fileInstances.set(file, 1);
      } else {
      }
    }
    return fileInstances;
  }
  // #region Log Functions
  //Opening and closing files done, apart from hover open file, and logic for having screen available but obsidian tabbed out and multi monitor mode
  //I think obsidian in foreground is something that is more of a system specific action so might have to ignore that for now but include condition for no leafs active at all (undefined)
  //[action:: start, end, open, close, create, modify, delete, move]
  //[method:: command, link]
  //if through link or if command based on a certain page
  //[origin:: [[note link]], file explorer, back links, graph]
  // Logic for opening and closing files
  // opened file has extra conditonal state (markdown & other), (if markdown, show file from)
  //- [[File]] Opened through [view:: viewType], [link:: ] at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileOpenLog(file, prevLeafFiles) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Opened]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Opened]';
    }
    return log;
  }
  //- [[File]] Closed at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileCloseLog(file) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Closed]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Closed]';
    }
    return log;
  }
  //Logic for modifying files
  //- [[File]] Modified at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileModifyLog(file) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Modified]";
    } else {
      log = '[target:: "' + file + '"]]]  [action:: Modified]';
    }
    return log;
  }
  // Logic for creating filees
  //- [[File]] Created at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileCreateLog(file) {
    let createdFile = this.app.vault.getAbstractFileByPath(file);
    let fileName = createdFile == null ? void 0 : createdFile.path;
    let type;
    let log;
    if (this.settings.logLinks === true) {
      if (createdFile instanceof import_obsidian.TFile) {
        if (createdFile.extension === "md") {
          type = "Note";
        } else {
          type = "Attachment";
        }
        log = "[target:: [[" + file + "|" + fileName + "]]]  [type:: " + type + "]  [action:: Created]";
      } else if (createdFile instanceof import_obsidian.TFolder) {
        type = "Folder";
        log = '[target:: "' + file + '"]]]  [type:: ' + type + "]  [action:: Created]";
      } else {
        type = "Other";
        log = "[target:: [[" + file + "|" + fileName + "]]]  [type:: " + type + "]  [action:: Created]";
      }
    } else {
      if (createdFile instanceof import_obsidian.TFile) {
        if (createdFile.extension === "md") {
          type = "Note";
        } else {
          type = "Attachment";
        }
      } else if (createdFile instanceof import_obsidian.TFolder) {
        type = "Folder";
      } else {
        type = "Other";
      }
      log = '[target:: "' + file + '"]]]  [type:: ' + type + "]  [action:: Created]";
    }
    return log;
  }
  // Logic for renaming/moving files
  //- [[OldFilePath]] renamed [[NewFilepath]] at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileMoveLog(file, oldFile) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let oldFolderPath = oldFile.replace(".*/", "");
    let newFolderPath = file.replace(filename, "");
    let log;
    if (this.settings.logLinks === true) {
      if (oldFolderPath === newFolderPath || this.app.vault.getAbstractFileByPath(file) instanceof import_obsidian.TFolder) {
        log = "[target-old:: [[" + oldFile + "]]]  [action:: Renamed] to [target:: [[" + file + "|" + filename + "]]]";
      } else {
        log = "[target-old:: [[" + oldFile + "]]]  [action:: Moved] to [target:: [[" + file + "|" + filename + "]]]";
      }
    } else {
      if (oldFolderPath === newFolderPath) {
        log = '[target-old:: "' + oldFile + '"]  [action:: Renamed] to [target:: "' + file + '"]';
      } else {
        log = '[target-old:: "' + oldFile + '"]  [action:: Moved] to [target:: "' + file + '"]';
      }
    }
    return log;
  }
  /* Logic for deleting files
  - [[File]] Deleted at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  Perhaps instead of doing a wikilink to the note in this case, do a 
  	I could treat the deleting of a file as a move, and then just create a trash bin folder like I was thinking of doing anyway, which could be a seperate vault, 
  	so I move the note all the way to a different one, with a new link to that location so I can still refer to it, or keep a folder in the same vault for it 
  	(later on move it, assign a trash location in settings, or use standard .trash folder option => find out how to activate in settings => files and links tab in settings!)*/
  FileDeleteLog(file) {
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "]]]  [action:: Deleted]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Deleted]';
    }
    return log;
  }
  // Logic for the obsidian app opening and closing
  //Find out how to do this on start and stop
  //add maybe session information for the other logs, so I can tell if they belong to a certain session or not, but then maybe I need more states than start and stopped, e.g. paused, resumed, as well
  // close all files on pause, open all files on resume
  ObsidianStartLog() {
    let log = "[target:: Obsidian]  [action:: Started]";
    return log;
  }
  ObsidianStopLog() {
    let log = "[target:: Obsidian]  [action:: Stopped]";
    return log;
  }
  // #endregion
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Log File Format").setDesc("The format for the log file").addText((text) => text.setPlaceholder("Example: Folder/log.md").setValue(this.plugin.settings.logFilePath).onChange(async (value) => {
      this.plugin.settings.logFilePath = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Links or Strings").setDesc("Whether to have links to files enabled or just the paths to files").addToggle((toggle) => toggle.setValue(this.plugin.settings.logLinks).onChange(async (value) => {
      this.plugin.settings.logLinks = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgXHJcblx0QXBwLCBcclxuXHRFZGl0b3IsIFxyXG5cdE1hcmtkb3duVmlldywgXHJcblx0TW9kYWwsIFxyXG5cdE5vdGljZSwgXHJcblx0UGx1Z2luLCBcclxuXHRQbHVnaW5NYW5pZmVzdCxcclxuXHRQbHVnaW5TZXR0aW5nVGFiLCBcclxuXHRTZXR0aW5nLCBcclxuXHRkZWJvdW5jZSwgXHJcblx0VEZpbGUsIFxyXG5cdFdvcmtzcGFjZSwgXHJcblx0V29ya3NwYWNlTGVhZiwgXHJcblx0VmlldyxcclxuXHRNYXJrZG93bkZpbGVJbmZvLFxyXG5cdFRGb2xkZXIsXHJcblx0VEFic3RyYWN0RmlsZSxcclxuXHRIb3ZlclBvcG92ZXIsXHJcblx0Q29tbWFuZCxcclxuXHRXb3Jrc3BhY2VXaW5kb3csXHJcblx0SG92ZXJMaW5rU291cmNlLFxyXG5cdEhvdmVyUGFyZW50XHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG4vLyBQYXJzZVlhbWwsIFxyXG5cclxuaW50ZXJmYWNlIExlYWZGaWxlcyB7XHJcblx0Y3VyTGVhZjogV29ya3NwYWNlTGVhZjtcclxuXHRsYXN0TGVhZjogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZDtcclxuXHRjdXJGaWxlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0Y3VyVHlwZTpzdHJpbmc7XHJcblx0cHJldkZpbGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHRwcmV2VHlwZTogc3RyaW5nOy8vc2VlIHdoYXQgaXQgY2hhbmdlZCBmcm9tIGlmIHN3aXRjaGluZyB0eXBlIG9mIHZpZXdcclxuXHRhY3RpdmU6Ym9vbGVhbjtcclxuXHRsb2dnZWQ6Ym9vbGVhbltdOy8vZmFsc2Ugd2hlbiBhbiB1cGRhdGVkIGxvZyBuZWVkcyB0byBiZSBnaXZlblxyXG5cdGludmlldzpib29sZWFuO1xyXG5cdC8vc3RhcnQ6Ym9vbGVhbjtcclxufVxyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTm90ZUxvZ1NldHRpbmdzIHtcclxuXHRteVNldHRpbmc6IHN0cmluZztcclxuXHRsb2dGaWxlUGF0aDogc3RyaW5nO1xyXG5cdGRhaWx5Tm90ZUZvcm1hdDogc3RyaW5nO1xyXG5cdGxvZ0xpbmtzOmJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE5vdGVMb2dTZXR0aW5ncyA9IHtcclxuXHRteVNldHRpbmc6ICdkZWZhdWx0JyxcclxuXHRsb2dGaWxlUGF0aDogJycsXHJcblx0ZGFpbHlOb3RlRm9ybWF0OiAnWVlZWS1NTS1ERCBbTE9HXScsXHJcblx0bG9nTGlua3M6IGZhbHNlXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2lkaWFuTm90ZUxvZyBleHRlbmRzIFBsdWdpbiB7XHJcblx0Ly8gI3JlZ2lvbiBJbnRpYWxpc2F0aW9uIG9mIHBsdWdpblxyXG5cdHNldHRpbmdzOiBOb3RlTG9nU2V0dGluZ3M7XHJcblx0bGVhZkZpbGVzOiBMZWFmRmlsZXNbXSA9IFtdO1xyXG5cclxuXHQvL3RoaXMuYXBwLmNvbW1hbmQuZ1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0LypcclxuXHRcdC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cclxuXHRcdGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignZGljZScsICdTYW1wbGUgUGx1Z2luJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGljb24uXHJcblx0XHRcdG5ldyBOb3RpY2UoJ1RoaXMgaXMgYSBub3RpY2UhJyk7XHJcblx0XHR9KTtcclxuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXHJcblx0XHRyaWJib25JY29uRWwuYWRkQ2xhc3MoJ215LXBsdWdpbi1yaWJib24tY2xhc3MnKTtcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxyXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcblx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnU3RhdHVzIEJhciBUZXh0Jyk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2ltcGxlIGNvbW1hbmQgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGFueXdoZXJlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4tc2FtcGxlLW1vZGFsLXNpbXBsZScsXHJcblx0XHRcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoc2ltcGxlKScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0Ly8gVGhpcyBhZGRzIGFuIGVkaXRvciBjb21tYW5kIHRoYXQgY2FuIHBlcmZvcm0gc29tZSBvcGVyYXRpb24gb24gdGhlIGN1cnJlbnQgZWRpdG9yIGluc3RhbmNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXHJcblx0XHRcdG5hbWU6ICdTYW1wbGUgZWRpdG9yIGNvbW1hbmQnLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xyXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKCdTYW1wbGUgRWRpdG9yIENvbW1hbmQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHQvLyBUaGlzIGFkZHMgYSBjb21wbGV4IGNvbW1hbmQgdGhhdCBjYW4gY2hlY2sgd2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwIGFsbG93cyBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmRcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXHJcblx0XHRcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoY29tcGxleCknLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXHJcblx0XHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XHJcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXHJcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyBmYWxzZSwgdGhlbiB3ZSB3YW50IHRvIGFjdHVhbGx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cclxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcclxuXHRcdFx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVySW50ZXJ2YWwod2luZG93LnNldEludGVydmFsKCgpID0+IGNvbnNvbGUubG9nKCdzZXRJbnRlcnZhbCcpLCA1ICogNjAgKiAxMDAwKSk7XHJcblx0XHQqL1xyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcdFxyXG5cdFx0XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSggKCkgPT4ge1xyXG5cdFx0XHQvL09ubHkgc2hvdyBjcmVhdGUgZXZlbnRzIGFmdGVyIHRoZSBmaWxlIGhhcyBiZWVuIGxvYWRlZFxyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyR2VuZXJhbEV2ZW50cygpO1xyXG5cdFx0XHR0aGlzLmluaXRpYWxpc2VMZWFmRmlsZSgpO1xyXG5cdFx0XHR0aGlzLmxvZ0xlYWZDaGFuZ2VzKGZhbHNlLCB0aGlzLnByb2Nlc3NMZWF2ZXMoZmFsc2UpKTtcclxuXHRcdFx0Ly9sZXQgbGVhZkZpbGVzOkxlYWZGaWxlc1tdID0gW107XHJcblx0XHRcdC8vdGhpcy5sZWFmRmlsZXMgPSAvL2luaXRpYWxpc2UgbGVhZnMsIGFuZCB0aGVuIGxvZyB0aG9zZSBjaGFuZ2VzXHJcblx0XHRcdHRoaXMucmVnaXN0ZXJPcGVuQ2xvc2VFdmVudHMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvL1BsdWdpbiBkaXNhYmxlZFxyXG5cdFx0dGhpcy5pbml0aWFsaXNlTGVhZkZpbGUoKTtcclxuXHRcdHRoaXMubG9nTGVhZkNoYW5nZXModHJ1ZSwgdGhpcy5wcm9jZXNzTGVhdmVzKHRydWUpKTtcclxuXHRcdC8vdGhpcy5sZWFmRmlsZXMgPSBcclxuXHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5PYnNpZGlhblN0b3BMb2coKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvLyAjZW5kcmVnaW9uXHJcblxyXG5cdC8vICNyZWdpb24gXHJcblxyXG5cdHJlZ2lzdGVyR2VuZXJhbEV2ZW50cygpIHtcclxuXHRcdGxldCBsb2dmaWxlID0gd2luZG93Lm1vbWVudCgpLmZvcm1hdCh0aGlzLnNldHRpbmdzLmxvZ0ZpbGVQYXRoKTtcclxuXHJcblx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuT2JzaWRpYW5TdGFydExvZygpKTtcclxuXHJcblx0XHQvL01vbml0b3JzIEZpbGVzIGNyZWF0ZWQgd2hpbGUgYXBwbGljYXRpb24gcnVubmluZyBhbmQgbm90IGR1cmluZyBzdGFydCB1cFxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwiY3JlYXRlXCIsIChmaWxlOlRBYnN0cmFjdEZpbGUpID0+IHtcclxuXHRcdFx0dGhpcy53cml0ZUNoYW5nZWxvZyh0aGlzLkZpbGVDcmVhdGVMb2coZmlsZS5wYXRoKSk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0LyogTW92ZS9yZW5hbWUgRmlsZSBFdmVudHNcclxuXHRcdGdldCBvbGQgcGF0aCwgdGhlbiB3aGF0IHRoZSBuZXcgcGF0aCB3aWxsIGJlXHJcblx0XHRUaGlzIGlkZWEgbWlnaHQgYmUgc2NyYXBlZCBiZWNhdXNlIHNheSBJIGhhdmUgYSBsb3Qgb2YgZmlsZXMgYW5kIGEgbG90IG9mIGxvZ3MsIG9ic2lkaWFuIGF1dG8gdXBkYXRlcyBsaW5rcywgXHJcblx0XHRcdHNvIGV2ZW4gc2hvd2luZyB0aGF0IHdvdWxkIGNhdXNlIGxhZywgYXMgdGhlIGFwcGxpY2F0aW9uIHRyaWVzIHRvIHVwZGF0ZSBhbGwgdGhlIGxpbmtzXHJcblx0XHRcdGluc3RlYWQgSSBzaG91bGQgc3RvcmUgdGhlIG5hbWVzIGFzIHN0cmluZ3MgYW5kIG5vdCBsaW5rcywganVzdCB0byBzaG93IHdoYXQgdGhlIHRleHQgc2FpZCBidXQgbm90IHRoZSBhY3R1YWwgbGlua1xyXG5cdFx0XHRiZWNhdXNlIHdlIHdhbnQgdGhlIGxvZyB0byBiZSBhIHJlY29yZCBvZiB0aGUgcmVuYW1pbmcgYW5kIG1vdmluZywgZm9yIHRoZSBpbmJveCBmaWx0ZXJpbmcgcHJvY2VzcyBmb3IgZXhhbXBsZSwgdG8gc2VlXHJcblx0XHRcdHdoYXQgc3RhZ2VzIGl0IGhhcyBnb25lIHRocm91Z2gsIG9yIGZvciBhIGZpbGUsIGhvdyB0aGUgbmFtZSBmb3IgdGhlIGNvbmNlcHQgaGFzIGNoYW5nZWQgb3ZlciB0aW1lLCBhbHRob3VnaCB0aGlzIHdvdWxkXHJcblx0XHRcdG1vc3RseSBiZSBtaW5pbWlzZWQgSSB0aGluayBidXQgSSdtIG5vdCBzdXJlLCBtb3N0IG9mIHRoaXMgcHJvZ3JhbSBpcyB0aGlua2luZyBqdXN0IGluIGNhc2UqL1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwicmVuYW1lXCIsIChmaWxlOlRBYnN0cmFjdEZpbGUsIG9sZE5hbWU6c3RyaW5nKSA9PiB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coXCJyZW5hbWVkOiBcIiArIGZpbGUucGF0aCArIFwiIGZyb20gXCIgKyBvbGROYW1lKTtcclxuXHRcdFx0dGhpcy53cml0ZUNoYW5nZWxvZyh0aGlzLkZpbGVNb3ZlTG9nKGZpbGUucGF0aCwgb2xkTmFtZSkpO1xyXG5cdFx0fSkpOyBcclxuXHJcblx0XHQvKiBNb2RpZnkgRmlsZSBFdmVudHNcclxuXHRcdFx0VGhlIGV2ZW50IGlzIGNhcnJpZWQgb3V0IGV2ZXJ5IDIgc2Vjb25kcywgYW5kIGN1cnJlbnRseSBpZiBlZGl0aW5nIGZvciBhIGxvbmcgdGltZSBpdCB3aWxsIHNob3cgYWxsIHRob3NlIGRldGFpbHNcclxuXHRcdGJhcmUgaW4gbWluZCB0aGF0IHRoZSBhY2N1cmFjeSBvZiB0aGUgaW5mb3JtYXRpb24gd291bGQgYmUgb2YgYnkgKy0gMiBzZWNvbmRzIGF0IHRoZSBzdGFydCBhbmQgZW5kIHRpbWVzIG9mIGEgbW9kaWZpY2F0aW9uIGJsb2NrKi9cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcIm1vZGlmeVwiLCAoZmlsZTpUQWJzdHJhY3RGaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlLnBhdGggIT0gbG9nZmlsZSkge1xyXG5cdFx0XHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5GaWxlTW9kaWZ5TG9nKGZpbGUucGF0aCkpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gRGVsZXRlIEZpbGUgRXZlbnRzXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgKGZpbGU6VEFic3RyYWN0RmlsZSkgPT4ge1xyXG5cdFx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuRmlsZURlbGV0ZUxvZyhmaWxlLnBhdGgpKTtcclxuXHRcdH0pKTtcclxuXHJcblx0XHQvL1doZW4gYXBwbGljYXRpb24gcXVpdHNcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJxdWl0XCIsICgpID0+IHtcclxuXHRcdFx0Ly9cclxuXHRcdFx0dGhpcy5pbml0aWFsaXNlTGVhZkZpbGUoKTtcclxuXHRcdFx0dGhpcy5sb2dMZWFmQ2hhbmdlcyh0cnVlLCB0aGlzLnByb2Nlc3NMZWF2ZXModHJ1ZSkpO1xyXG5cclxuXHRcdFx0dGhpcy53cml0ZUNoYW5nZWxvZyh0aGlzLk9ic2lkaWFuU3RvcExvZygpKTtcclxuXHRcdH0pKVxyXG5cdH1cclxuXHJcblx0cmVnaXN0ZXJPcGVuQ2xvc2VFdmVudHMoKSB7XHJcblxyXG5cdFx0bGV0IGhvdmVyID0gbmV3IE1hcDxzdHJpbmcsSFRNTENvbGxlY3Rpb25PZjxFbGVtZW50Pj4oKVxyXG5cclxuXHRcdGNvbnN0IGRlYm91bmNlZEFjdGl2ZUxlYWZDaGFuZ2UgPSBkZWJvdW5jZSgoKSA9PiB7XHJcblx0XHRcdHRoaXMuaW5pdGlhbGlzZUxlYWZGaWxlKCk7XHJcblx0XHRcdHRoaXMubG9nTGVhZkNoYW5nZXMoZmFsc2UsIHRoaXMucHJvY2Vzc0xlYXZlcyhmYWxzZSkpO1xyXG5cdFx0XHQvL2xldCBob3Zlck5vdGVzID0gdGhpcy5hcHAud29ya3NwYWNlLmNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJob3Zlci1wb3BvdmVyXCIpO1xyXG5cdFx0ICB9LCAxMDApO1xyXG5cclxuXHRcdC8vLypGaWxlIE9wZW5pbmcgKG9wZW4gZmlsZSBiZWNvbWVzIGFjdGl2ZSwgY2FuIGJlIHVzZSBmb3IgY2xvc2luZyBieSBjaGVja2luZyBwcmV2aW91cyBhY3RpdmUgbGVhZilcclxuXHRcdFxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImFjdGl2ZS1sZWFmLWNoYW5nZVwiLCAobGVhZikgPT4gey8vd2hlbiBhY3RpdmUgbGVhZiBpcyBjaGFuZ2VkXHJcblx0XHRcdC8vSW5zdGVhZCBvZiB1c2luZyBteSBwcmV2aW91cyBhcHByb2FjaCBvZiBoYW5kbGluZyBldmVyeXRoaW5nIHRocm91Z2ggZXZlcnkgc2luZ2xlIGFjdGlvbiBvbiBlYWNoIGV2ZW50LCBvbmx5IGNoYW5nZSB0aGUgc3BlY2lmaWNzIGluIGhlcmUgXHJcblx0XHRcdHRoaXMuaW5pdGlhbGlzZUxlYWZGaWxlKCk7XHJcblxyXG5cdFx0XHRpZiAobGVhZiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Ly9nZXQgdGhlIGluZGV4IG9mIHRoZSBuZXcgY3VycmVudCBhY3RpdmUgbGVhZlxyXG5cdFx0XHRcdGxldCBuZXdBY3RpdmVJbmRleCA9IHRoaXMubGVhZkZpbGVzLmZpbmRJbmRleChsZWFmZGF0YSA9PiBsZWFmZGF0YS5jdXJMZWFmID09PSBsZWFmKTtcclxuXHJcblx0XHRcdFx0Ly9nZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGFjdGl2ZSBsZWFmXHJcblx0XHRcdFx0bGV0IGxhc3RBY3RpdmUgPSB0aGlzLmxlYWZGaWxlcy5maW5kKGxlYWZkYXRhID0+IGxlYWZkYXRhLmFjdGl2ZSA9PT0gdHJ1ZSk7XHJcblx0XHRcdFx0bGV0IGxhc3RBY3RpdmVJbmRleCA9IHRoaXMubGVhZkZpbGVzLmZpbmRJbmRleChsZWFmZGF0YSA9PiBsZWFmZGF0YS5hY3RpdmUgPT09IHRydWUpO1xyXG5cclxuXHRcdFx0XHQvL3RoaXMgc2V0cyB0aGUgYWN0aXZlIGxlYWYgdGhlIG5ldyBhY3RpdmUgbGVhZiB0byB0cnVlXHJcblx0XHRcdFx0dGhpcy5sZWFmRmlsZXNbbmV3QWN0aXZlSW5kZXhdLmFjdGl2ZSA9IHRydWU7XHJcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgaW5kZWVkIGEgbGFzdCBhY3RpdmUgbGVhZlxyXG5cdFx0XHRcdGlmKGxhc3RBY3RpdmUgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0Ly90aGVuIHNldCBsYXN0bGVhZiB0byB0aGF0IGxlYWYgeW91IGZvdW5kXHJcblx0XHRcdFx0XHR0aGlzLmxlYWZGaWxlc1tsYXN0QWN0aXZlSW5kZXhdLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dGhpcy5sZWFmRmlsZXNbbmV3QWN0aXZlSW5kZXhdLmxhc3RMZWFmID0gbGFzdEFjdGl2ZS5jdXJMZWFmO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL2lmIHRoZXJlIGlzIG5vIGxlYWYgYWN0aXZlLCBjbG9zZSBhbGwgb3BlbiBub3RlcyAoYnV0IHRoZW4gY29tZXMgdGhlIHByb2JsZW0sIHRoYXQgb24gdGhlIGNsb3Npbmcgb2YgdGhlIG1haW4gbGVhZiBub3RlLFxyXG5cdFx0XHRcdC8vXHQgaXQgd2lsbCBiZSBlbXB0eSwgd2hpY2ggd2lsbCBhbHNvIG1ha2UgYWN0aXZlIGxlYWYgbnVsbCwgdW5sZXNzIEkganVzdCBkb24ndCBkbyB0aGF0KSwgaSBjb3VudCBpdCBhcyBvcGVuIGZvciBhcyBsb25nIGFzIEkgZG9uJ3QgY2xvc2UgaXRcclxuXHRcdFx0fVxyXG5cdFx0fSkpO1xyXG5cclxuXHRcdC8vT3BlbmluZyBhbmQgY2xvc2luZyAod2hlbiBjaGFuZ2luZyB1cCB0aGUgbGF5b3V0LCBjbG9zaW5nIHRhYnMsIGNyZWF0aW5nIG5ldyBzcGxpdHMgZXRjLilcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJsYXlvdXQtY2hhbmdlXCIsICgpID0+IHsvL1doZW4geW91IGNoYW5nZSB0aGUgbGF5b3V0IG9mIHRoZSB3b3Jrc3BhY2VcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIkxheW91dCBjaGFuZ2VcIik7XHJcblx0XHRcdGRlYm91bmNlZEFjdGl2ZUxlYWZDaGFuZ2UoKTtcclxuXHRcdH0pKTtcclxuXHJcblx0XHQvL0ZpbGUgT3BlbmluZyBhbmQgY2xvc2luZyAobWFpbmx5IGZvciBzaWRlYmFycylcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJyZXNpemVcIiwgKCkgPT4gey8vV2hlbiB5b3UgcmVzaXplIGFueSBjb21wb25lbnQgaW4gdGhlIHdvcmtzcGFjZVxyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwicmVzaXplXCIpO1xyXG5cdFx0XHRkZWJvdW5jZWRBY3RpdmVMZWFmQ2hhbmdlKCk7XHJcblx0XHR9KSkvLyovXHJcblxyXG5cdFx0Ly9GaWxlIE9wZW5pbmdcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6VEZpbGUpID0+IHsvL1doZW4geW91IG9wZW4gYSBmaWxlIChub3JtYWwgb3BlbiBmaWxlIG5vdCBjdXN0b20gb25lIEkgd2FudClcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcImZpbGUgb3BlblwiKTtcclxuXHRcdFx0ZGVib3VuY2VkQWN0aXZlTGVhZkNoYW5nZSgpO1xyXG5cdFx0fSkpO1xyXG5cclxuXHRcdC8vdGhpcy5hcHAuLnBsdWdpbnMucGx1Z2luc1tcIm9ic2lkaWFuLWhvdmVyLWVkaXRvclwiXS5hY3RpdmVQb3BvdmVycyAgXHJcblxyXG5cdFx0LypcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwibGluay1ob3ZlclwiLFxyXG5cdFx0XHRjb25zb2xlLmxvZygnaG92ZXInKVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdtb3VzZW92ZXInLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygnbW91c2VvdmVyJywgZXZ0LnRhcmdldC4pO1xyXG5cdFx0XHQvL2xldCBsZWFmRWwgPSBhcHAud29ya3NwYWNlLmNvbnRhaW5lckVsLmZpbmQoXCIuaG92ZXItcG9wb3ZlclwiKTtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygnSG92ZXIgRWxlbWVudDogJyxsZWFmRWwpO1xyXG5cdFx0XHQvL2xldCBhbGxMZWF2ZXMgPSBhcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpO1xyXG5cclxuXHRcdFx0Y29uc3QgdGFyZ2V0RWwgPSBldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cclxuXHRcdFx0LyphcHAud29ya3NwYWNlLnRyaWdnZXIoXCJsaW5rLWhvdmVyXCIsIHtcclxuXHRcdFx0XHRldmVudDogZXZ0LFxyXG5cdFx0XHRcdC8vc291cmNlOiAsXHJcblx0XHRcdFx0aG92ZXJQYXJlbnQ6IHRhcmdldEVsLnBhcmVudEVsZW1lbnQsXHJcblx0XHRcdFx0dGFyZ2V0RWwsXHJcblx0XHRcdFx0Ly9saW5rdGV4dDogY3VyckZpbGUucGF0aCxcclxuXHRcdFx0fSk7KlxyXG5cclxuXHRcdFx0YXBwLndvcmtzcGFjZS50XHJcblx0XHRcdFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2VvdXQnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coXCJub3QgaG92ZXJpbmcgYW55bW9yZVwiKVxyXG5cdFx0fSk7Ly8qL1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHQvLyAjZW5kcmVnaW9uXHJcblxyXG5cdC8vICNyZWdpb24gTGVhZkZpbGUgRnVuY3Rpb25zXHJcblxyXG5cdC8qXHJcblx0Z2V0IGFsbCB0aGUgbGVhdmVzIHRoYXQgY3VycmVudGx5IGV4aXN0IGFuZCBhcmUgdmlld2FibGUgYW5kIGFkZCB0aGVtIHRvIGFycmF5LCBpZiB0aGV5IGFyZW4ndCBpbiB0aGVyZSB5ZXQsIHRoZW4gYWRkIHRoZW0gbmV3bHksIHdpdGggaW5pdGlhbGlzZWQgdmFsdWVzXHJcblx0Ki9cclxuXHRpbml0aWFsaXNlTGVhZkZpbGUoKSB7XHJcblx0XHQvL2xldCBsZWFmRmlsZXM6TGVhZkZpbGVzW10gPSBbXTtcclxuXHRcdC8vRmlyc3QgSSB3YW50IHRvIGdldCBhbGwgdGhlIHZpc2libGUgbGVhdmVzIGN1cnJlbnRseSBpbiB0aGUgd29ya3NwYWNlIHdpbmRvd1xyXG5cdFx0bGV0IGFsbExlYXZlcyA9IHRoaXMuZ2V0VmlzaWJsZUxlYXZlcyh0aGlzLmdldExlYWZzSW5Xb3Jrc3BhY2UoKSk7Ly90aGlzLmdldFZpc2libGVMZWF2ZXModGhpcy5nZXRMZWFmc0luV29ya3NwYWNlKCkpO1xyXG5cclxuXHRcdC8vZm9yIGV2ZXJ5IGV4aXN0aW5nIGxlYWZcclxuXHRcdGZvciAobGV0IGxlYWYgPSAwOyBsZWFmIDwgYWxsTGVhdmVzLmxlbmd0aDsgbGVhZisrKSB7XHJcblx0XHRcdGxldCB0aGlzTGVhZiA9IGFsbExlYXZlc1tsZWFmXTtcclxuXHRcdFx0XHJcblx0XHRcdGxldCB0aGlzTGVhZkRhdGEgPSB0aGlzLmxlYWZGaWxlcy5maW5kKCAobGVhZmRhdGEpID0+IGxlYWZkYXRhLmN1ckxlYWYgPT09IHRoaXNMZWFmKVxyXG5cdFx0XHQvL2lmIHRoZSBsZWFmIGlzIG5vdCBhbHJlYWR5IGJlZW4gYWRkZWQgdG8gbGVhZkZpbGVzXHJcblx0XHRcdGlmICh0aGlzTGVhZkRhdGEgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0bGV0IG5ld0xlYWY6TGVhZkZpbGVzID0ge1xyXG5cdFx0XHRcdFx0Y3VyTGVhZjp0aGlzTGVhZixcclxuXHRcdFx0XHRcdGxhc3RMZWFmOnVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdGN1ckZpbGU6dW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0Y3VyVHlwZTpcImVtcHR5XCIsXHJcblx0XHRcdFx0XHRwcmV2RmlsZTp1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRwcmV2VHlwZTpcImVtcHR5XCIsXHJcblx0XHRcdFx0XHRhY3RpdmU6ZmFsc2UsXHJcblx0XHRcdFx0XHRsb2dnZWQ6W3RydWUsIHRydWVdLFxyXG5cdFx0XHRcdFx0aW52aWV3OnRydWUsXHJcblx0XHRcdFx0XHQvLzpmYWxzZVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly9pZiBjYW4gZmluZCBjdXJyZW50IGxlYWYsIGluIHZpc2libGUgbGVhdmVzXHJcblx0XHRcdFx0dGhpcy5sZWFmRmlsZXMucHVzaChuZXdMZWFmKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2Vsc2UgaWYgaXQgYWxyZWFkeSBleGl0c1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LypcclxuXHRpZiBhIGxlYWYgaGFzIGNoYW5nZWQgZnJvbSBob3cgaXQgd2FzIGJlZm9yZSwgdXBkYXRlIHRoZSBkZXRhaWxzIHN0b3JlZCBhYm91dCB0aGF0IGxlYWZcclxuXHQqL1xyXG5cdHByb2Nlc3NMZWF2ZXMoZW5kOmJvb2xlYW4pOm51bWJlcltdIHsvLyBzdGFydDpib29sZWFuLCBlbmQ6Ym9vbGVhblxyXG5cdFx0Ly9sZXQgbmV3TGVhZkZpbGVzOkxlYWZGaWxlc1tdID0gW107XHJcblx0XHQvL2NoZWNrIHdoYXQgdGhlIGFjdGl2ZSBsZWFmIGN1cnJlbnRseSBpc1xyXG5cdFx0Ly9sZXQgYWN0aXZlTGVhZiA9IGxlYWZGaWxlcy5maW5kKCBsZWFmZGF0YSA9PiBsZWFmZGF0YS5hY3RpdmUgPT09IHRydWUpO1xyXG5cdFx0bGV0IGFsbExlYXZlcyA9IHRoaXMuZ2V0TGVhZnNJbldvcmtzcGFjZSgpO1xyXG5cdFx0bGV0IHZpc2libGVMZWF2ZXMgPSB0aGlzLmdldFZpc2libGVMZWF2ZXMoYWxsTGVhdmVzKTtcclxuXHRcdC8vZmluZCB0aGUgZmlsZSBvY2N1cmVuY2VzIG9mIGVhY2ggZmlsZSBhY3RpdmUgaW4gdGhlIGxlYWZcclxuXHJcblx0XHRsZXQgZGVsZXRlTGVhZkZpbGU6bnVtYmVyW10gPSBbXTtcclxuXHRcdGxldCBvY2NjdXJlbmNlcyA9IHRoaXMuZ2V0T3BlbkZpbGVJbnN0YW5jZXModmlzaWJsZUxlYXZlcyk7Ly9zZXQgb2NjdXJlbmNlcyBvZiB0aGUgZmlsZSB5b3UgYXJlIHRyeWluZyB0byBjbG9zZVxyXG5cclxuXHRcdGZvciAobGV0IGxlYWYgPSAwOyBsZWFmIDwgdGhpcy5sZWFmRmlsZXMubGVuZ3RoOyBsZWFmKyspIHtcclxuXHRcdFx0bGV0IGxlYWZkYXRhID0gdGhpcy5sZWFmRmlsZXNbbGVhZl07XHJcblx0XHRcdGxldCB2aWV3YWJsZSA9IHZpc2libGVMZWF2ZXMuZmluZCh2aXNpYmxlTGVhZiA9PiB2aXNpYmxlTGVhZiA9PT0gbGVhZmRhdGEuY3VyTGVhZik7Ly9pZiBjdXJyZW50IGxlYWYgaXMgdmlzaWJsZT9cclxuXHRcdFx0XHJcblx0XHRcdC8vaWYgdGhlcmUgaGFzIGJlZW4gYSBjaGFuZ2UgaW4gdGhlIGZpbGUgc2hvd24gaW4gdGhlIGxlYWYsIG9yIHRoZSB0eXBlIG9mIHRoZSBsZWFmIGhhcyBjaGFuZ2VkLCBhbmQgdGhlIGxlYWYgY2FuIGJlIGZvdW5kIGluIHRoZSB3b3Jrc3BhY2VcclxuXHRcdFx0aWYgKChsZWFmZGF0YS5jdXJGaWxlICE9PSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpPy5zdGF0ZS5maWxlIHx8IGxlYWZkYXRhLmN1clR5cGUgIT0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlKSB8fCBcclxuXHRcdFx0KGxlYWZkYXRhLmludmlldyA9PT0gdHJ1ZSAmJiB2aWV3YWJsZSA9PT0gdW5kZWZpbmVkKSB8fCAobGVhZmRhdGEuaW52aWV3ID09PSBmYWxzZSAmJiB2aWV3YWJsZSAhPT0gdW5kZWZpbmVkKSB8fCBlbmQgPT09IHRydWUpIHtcclxuXHJcblx0XHRcdFx0Ly9pZiAobGVhZmRhdGEuY3VyRmlsZSAhPT0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSB8fCBsZWFmZGF0YS5jdXJUeXBlICE9IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZSkge1xyXG5cdFx0XHRcdGxlYWZkYXRhLmxvZ2dlZCA9IFt0cnVlLCB0cnVlXTsvL3NldCBsZWFmIGZvciBuZWVkaW5nIHVwZGF0aW5nXHJcblxyXG5cdFx0XHRcdC8vZmluZCB3aGV0aGVyIHRoZXJlIGlzIGFuIG9jY3VyZW5jZSBvZiB0aGUgbmV3IGZpbGUgaW4gdGhlIGxlYWZGaWxlcyB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gbWFkZSBpbiB2aWV3XHJcblx0XHRcdFx0bGV0IG5ld0ZpbGVPY2N1cmVuY2UgPSB0aGlzLmxlYWZGaWxlcy5maW5kKGxlYWZEYXRhID0+IGxlYWZEYXRhLmN1ckZpbGUgPT09IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCk/LnN0YXRlLmZpbGUgJiYgbGVhZkRhdGEuaW52aWV3ID09PSB0cnVlICYmIGxlYWZEYXRhLmN1clR5cGUgPT09IFwibWFya2Rvd25cIiAmJiBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpPy50eXBlID09PSBcIm1hcmtkb3duXCIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vaWYgdGhlcmUgYXJlIG5vIG9jY3VyZW5jZXMgb2YgdGhhdCBmaWxlIGluIGxlYWZGaWxlcyBpbnZpZXdcclxuXHRcdFx0XHRpZiAobmV3RmlsZU9jY3VyZW5jZSA9PT0gdW5kZWZpbmVkICYmIGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCk/LnR5cGUgPT0gXCJtYXJrZG93blwiICYmIChsZWFmZGF0YS5jdXJGaWxlICE9PSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5maWxlIHx8IGxlYWZkYXRhLmludmlldyA9PT0gZmFsc2UpKSB7XHJcblx0XHRcdFx0XHRsZWFmZGF0YS5sb2dnZWRbMF0gPSBmYWxzZTsvL3NldCBsZWFmIGZvciBuZWVkaW5nIGxvZ3MgZm9yIHRoZSBhY3Rpb24gb2Ygb3BlbmluZ1xyXG5cdFx0XHRcdFx0bGVhZmRhdGEuaW52aWV3ID0gdHJ1ZTsvL3NldCB0byB0cnVlIGZvciB0aGF0IGxlYWZcclxuXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL2lmIHRoZXJlIGFyZSBubyBvY2N1cmVuY2VzIG9mIHRoZSBjdXJyZW50IGZpbGUgc29tZXdoZXJlIGVsc2UgYW5kIHlvdSBhcmUgdHJ5aW5nIHRvIGNsb3NlIGl0XHJcblx0XHRcdFx0aWYgKCAobGVhZmRhdGEuY3VyRmlsZSAhPT0gdW5kZWZpbmVkICYmIG9jY2N1cmVuY2VzLmdldChsZWFmZGF0YS5jdXJGaWxlKSA9PT0gdW5kZWZpbmVkIHx8IHZpZXdhYmxlID09PSB1bmRlZmluZWQpICYmIGxlYWZkYXRhLmN1clR5cGUgPT0gXCJtYXJrZG93blwiKSB7XHJcblx0XHRcdFx0XHRsZWFmZGF0YS5pbnZpZXcgPSBmYWxzZTsvL3NldCB2aWV3IGZvciB0aGF0IGxlYWYvZmlsZSB0byBmYWxzZSBmb3IgdGhhdCBsZWFmXHJcblxyXG5cdFx0XHRcdFx0bGV0IG9sZEZpbGVPY2N1cmVuY2UgPSB0aGlzLmxlYWZGaWxlcy5maW5kKGxlYWZEYXRhID0+IGxlYWZEYXRhLmN1ckZpbGUgPT09IGxlYWZkYXRhLmN1ckZpbGUgJiYgbGVhZkRhdGEuaW52aWV3ID09PSB0cnVlKTtcclxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2cob2xkRmlsZU9jY3VyZW5jZSk7XHJcblx0XHRcdFx0XHRpZiAob2xkRmlsZU9jY3VyZW5jZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRcdGxlYWZkYXRhLmxvZ2dlZFsxXSA9IGZhbHNlOy8vc2V0IGxlYWYgZm9yIG5lZWRpbmcgdXBkYXRpbmdcclxuXHJcblx0XHRcdFx0XHRcdGlmICh2aWV3YWJsZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly90aGlzLmxlYWZGaWxlcy5zcGxpY2UobGVhZiwxKTtcclxuXHRcdFx0XHRcdFx0XHRkZWxldGVMZWFmRmlsZS5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoZW5kID09PSB0cnVlKSB7XHJcblx0XHRcdFx0XHRpZiAobGVhZmRhdGEuY3VyRmlsZSAhPT0gdW5kZWZpbmVkICYmIG9jY2N1cmVuY2VzLmdldChsZWFmZGF0YS5jdXJGaWxlKSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHZhbHVlcyBmb3IgZmlsZXMgYW5kIHR5cGVzXHJcblx0XHRcdFx0XHRcdGxlYWZkYXRhLnByZXZGaWxlID0gbGVhZmRhdGEuY3VyRmlsZTtcclxuXHRcdFx0XHRcdFx0bGVhZmRhdGEucHJldlR5cGUgPSBsZWFmZGF0YS5jdXJUeXBlO1xyXG5cdFx0XHRcdFx0XHRsZWFmZGF0YS5jdXJGaWxlID0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZTtcclxuXHRcdFx0XHRcdFx0bGVhZmRhdGEuY3VyVHlwZSA9IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZTtcclxuXHRcdFx0XHRcdFx0b2NjY3VyZW5jZXMuc2V0KGxlYWZkYXRhLmN1ckZpbGUsIHVuZGVmaW5lZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGVuZCA9PT0gZmFsc2Upe1xyXG5cdFx0XHRcdFx0Ly91cGRhdGUgdmFsdWVzIGZvciBmaWxlcyBhbmQgdHlwZXNcclxuXHRcdFx0XHRcdGxlYWZkYXRhLnByZXZGaWxlID0gbGVhZmRhdGEuY3VyRmlsZTtcclxuXHRcdFx0XHRcdGxlYWZkYXRhLnByZXZUeXBlID0gbGVhZmRhdGEuY3VyVHlwZTtcclxuXHRcdFx0XHRcdGxlYWZkYXRhLmN1ckZpbGUgPSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5maWxlO1xyXG5cdFx0XHRcdFx0bGVhZmRhdGEuY3VyVHlwZSA9IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvL2NvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyh0aGlzLmxlYWZGaWxlcyk7XHJcblx0XHQvL2NvbnNvbGUubG9nKGRlbGV0ZUxlYWZGaWxlKTtcclxuXHJcblx0XHRyZXR1cm4gZGVsZXRlTGVhZkZpbGU7XHJcblx0fVxyXG5cclxuXHQvKlxyXG5cdENoZWNrIGFsbCB0aGUgY2hhbmdlcyB0aGF0IGhhdmUgYmVlbiByZWNvcmRlZCBmb3IgbmVlZGluZyB1cGRhdGVzLCBhbmQgdGhlbiBvdXRwdXQgdGhlIHJlc3VsdCBvZiB0aGF0XHJcblx0Ki9cclxuXHRsb2dMZWFmQ2hhbmdlcyhlbmQ6Ym9vbGVhbiwgZGVsZXRlZExlYWY6bnVtYmVyW10pIHtcclxuXHRcdC8vbGV0IG5ld0xlYWZGaWxlczpMZWFmRmlsZXNbXSA9IFtdO1xyXG5cclxuXHRcdC8vbGV0IGFsbExlYXZlcyA9IHRoaXMuZ2V0TGVhZnNJbldvcmtzcGFjZSgpO1xyXG5cdFx0Ly9sZXQgdmlzaWJsZUxlYXZlcyA9IHRoaXMuZ2V0VmlzaWJsZUxlYXZlcyhhbGxMZWF2ZXMpO1xyXG5cdFx0Ly9sZXQgb3BlbkZpbGVzTWFwID0gdGhpcy5nZXRPcGVuRmlsZUluc3RhbmNlcyh2aXNpYmxlTGVhdmVzKTtcclxuXHJcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBhbGwgdGhlIGxlYWZzLCB0aGF0IGhhdmUgaGFkIGNoYW5nZXNcclxuXHRcdGZvciAobGV0IGxlYWYgPSAwOyBsZWFmIDwgdGhpcy5sZWFmRmlsZXMubGVuZ3RoOyBsZWFmKyspIHtcclxuXHRcdFx0bGV0IGxlYWZkYXRhID0gdGhpcy5sZWFmRmlsZXNbbGVhZl07XHJcblx0XHRcdC8vbGV0IHZpZXdhYmxlID0gdGhpcy5nZXRWaXNpYmxlTGVhdmVzKGFsbExlYXZlcykuZmluZCh2aXNpYmxlTGVhZiA9PiB2aXNpYmxlTGVhZiA9PT0gbGVhZmRhdGEuY3VyTGVhZik7Ly9jaGVja3MgaWYgbGVhZiBpcyBjdXJyZW50bHkgdmlld2FibGVcclxuXHJcblx0XHRcdC8vcmV3b3JrIGxvZ2ljIGZvciBjbG9zaW5nIGFsbCBvcGVuIGZpbGVzXHJcblx0XHRcdGlmIChlbmQgPT09IHRydWUgJiYgbGVhZmRhdGEuaW52aWV3ID09PSB0cnVlICYmIGxlYWZkYXRhLnByZXZUeXBlID09PSBcIm1hcmtkb3duXCIpIHtcclxuXHRcdFx0XHRsZWFmZGF0YS5sb2dnZWRbMV0gPSBmYWxzZTtcclxuXHRcdFx0XHRsZWFmZGF0YS5pbnZpZXcgPSBmYWxzZTtcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiQ2xvc2luZyBvcGVuIGZpbGVzXCIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAobGVhZmRhdGEubG9nZ2VkWzFdID09PSBmYWxzZSAmJiBsZWFmZGF0YS5wcmV2RmlsZSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy53cml0ZUNoYW5nZWxvZyh0aGlzLkZpbGVDbG9zZUxvZyhsZWFmZGF0YS5wcmV2RmlsZSkpO1xyXG5cdFx0XHRcdGxlYWZkYXRhLmxvZ2dlZFsxXSA9IHRydWVcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGxlYWZkYXRhLmxvZ2dlZFswXSA9PT0gZmFsc2UgJiYgbGVhZmRhdGEuY3VyRmlsZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5GaWxlT3BlbkxvZyggbGVhZmRhdGEuY3VyRmlsZSwgdGhpcy5sZWFmRmlsZXMuZmluZChkYXRhID0+IGRhdGEuY3VyTGVhZiA9PT0gbGVhZmRhdGEubGFzdExlYWYpICkpO1xyXG5cdFx0XHRcdGxlYWZkYXRhLmxvZ2dlZFswXSA9IHRydWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRmb3IgKGxldCBkYXRhID0gZGVsZXRlZExlYWYubGVuZ3RoIC0gMTsgZGF0YSA+IC0xOyBkYXRhLS0pIHtcclxuXHRcdFx0dGhpcy5sZWFmRmlsZXMuc3BsaWNlKGRlbGV0ZWRMZWFmW2RhdGFdLDEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vY29uc29sZS5sb2codGhpcy5sZWFmRmlsZXMpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcclxuXHRcdC8vcmV0dXJuIGRlbGV0ZWRMZWFmO1xyXG5cdH1cclxuXHJcblx0Ly8jZW5kcmVnaW9uIFxyXG5cclxuXHQvLyAjcmVnaW9uIEZpbGUgV3JpdGluZ1xyXG5cclxuXHQvL0xvZyBidWlsZGluZyBMb2dpY1xyXG5cclxuXHRhc3luYyB3cml0ZUluRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0ICBcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFwcGVuZChmaWxlLCBjb250ZW50KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHQgIFx0bmV3IE5vdGljZShcIkNvdWxkbid0IHdyaXRlIE5vdGUgbG9nOiBjaGVjayB0aGUgZmlsZSBwYXRoLCBmaWxlIG1pZ2h0IG5vdCBleGlzdFwiKTtcclxuXHRcdH1cclxuXHRcdC8vY29uc29sZS5sb2coZmlsZSwgY29udGVudCk7XHJcblx0fVxyXG5cclxuXHRidWlsZENoYW5nZWxvZyhsb2dUZXh0OnN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRsZXQgbG9nRm9ybWF0ID0gXCJbW2RhdGU6Ol0gWVlZWS1NTS1ERFtdXSBbYXRdIFtbdGltZTo6XSBISDptbTpzc1tdXSBbW3RpbWV6b25lOjpdWltdXVwiOy8vIFtmcm9tXSBbW2xvY2F0aW9uOjogXHJcblxyXG5cdFx0bGV0IGNoYW5nZWxvZ0NvbnRlbnQgPSBgYDtcclxuXHRcdGNvbnN0IGh1bWFuVGltZSA9IHdpbmRvd1xyXG5cdFx0XHQubW9tZW50KClcclxuXHRcdFx0LmZvcm1hdChsb2dGb3JtYXQpOy8vW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdFx0Y2hhbmdlbG9nQ29udGVudCArPSBgLSAke2h1bWFuVGltZX0gXHUwMEI3ICR7bG9nVGV4dH1cXG5gO1xyXG5cclxuXHRcdHJldHVybiBjaGFuZ2Vsb2dDb250ZW50O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgd3JpdGVDaGFuZ2Vsb2cobG9nVGV4dDpzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGxvZyA9IHRoaXMuYnVpbGRDaGFuZ2Vsb2cobG9nVGV4dCk7XHJcblx0XHRsZXQgZmlsZSA9IHdpbmRvdy5tb21lbnQoKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5sb2dGaWxlUGF0aCk7Ly8udG9TdHJpbmcoKTtcclxuXHRcdC8vY29uc29sZS5sb2coZmlsZSlcclxuXHRcdGF3YWl0IHRoaXMud3JpdGVJbkZpbGUoZmlsZSwgbG9nKTtcclxuXHR9XHJcblxyXG5cdC8vICNlbmRyZWdpb25cclxuXHJcblx0Ly9PcGVuIGFuZCBDbG9zaW5nIFxyXG5cdC8vc3RpbGwgaGF2ZSBub3QgZmFjdHVyZWQgaW4gaG92ZXIgb3BlbiBub3Rlc1xyXG5cdGdldExlYWZzSW5Xb3Jrc3BhY2UoKTpXb3Jrc3BhY2VMZWFmW10ge1xyXG5cdFx0Ly9GbGF3IGluIGxvZ2ljLCBzaW5jZSBpdCBkb2Vzbid0IGNvdW50IGFsbCB0aGUgbGVhdmVzIGluIGEgZGlmZmVyZW50IHdpbmRvd1xyXG5cdFx0Ly9kb2VzIG5vdCBhY2NvdW50IGZvciBob3ZlcmluZyBvdmVyIGZpbGVzXHJcblx0XHRsZXQgbGVhZnNJbldvcmtzcGFjZTpXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHJcblx0XHQvL3RoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4geyBsZWFmc0luV29ya3NwYWNlLnB1c2gobGVhZik7IH0pO1xyXG5cdFx0XHJcblx0XHQvL0NoYW5nZWQgdGhpcyBzbyB0aGF0IGluc3RlYWQgSSBkb24ndCBjYXJlIGFib3V0IG90aGVyIHR5cGVzIG9mIGxlYXZlcywgYW5kIGluIHRoaXMgd2F5LCBhbHNvIGZpbmQgYW55IGhpZGRlbiBsZWF2ZXMgdGhhdCBhcmVuJ3Qgc2hvd2luZyBpbiB0aGUgd29ya3NwYWNlIGl0ZXJhdGUgYWxsXHJcblx0XHRsZWFmc0luV29ya3NwYWNlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyhsZWFmc0luV29ya3NwYWNlKTtcclxuXHRcdHJldHVybiBsZWFmc0luV29ya3NwYWNlO1xyXG5cdH1cclxuXHJcblx0Z2V0VmlzaWJsZUxlYXZlcyhsZWFmczpXb3Jrc3BhY2VMZWFmW10gKTpXb3Jrc3BhY2VMZWFmW10ge1xyXG5cclxuXHRcdGxldCB2aXNpYmxlTGVhZnM6V29ya3NwYWNlTGVhZltdID0gW107XHJcblxyXG5cdFx0Zm9yIChsZXQgbGVhZiA9IDA7IGxlYWYgPCBsZWFmcy5sZW5ndGg7IGxlYWYrKykge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKGluZGV4KTsgLy8gcHJpbnRzIGluZGV4ZXM6IDAsIDEsIDIsIDNcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhhcnJbaW5kZXhdLmdldERpc3BsYXlUZXh0KCkpOyAvLyBwcmludHMgZWxlbWVudHM6IDEwLCAyMCwgMzAsIDQwXHJcblx0XHRcdGxldCBsZWFmU3R5bGUgPSBsZWFmc1tsZWFmXS52aWV3LmNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ/LnN0eWxlLmRpc3BsYXk7XHJcblx0XHRcdGxldCBtYWluU3BsaXQgPSBsZWFmc1tsZWFmXS52aWV3LmNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ7XHJcblxyXG5cdFx0XHQvL2lmIChsZWFmc1tsZWFmXS5nZXRWaWV3U3RhdGUoKS50eXBlID09IFwibWFya2Rvd25cIikge1xyXG5cdFx0XHRcdGlmKG1haW5TcGxpdD8uY2xhc3NOYW1lLmluY2x1ZGVzKFwibW9kLWxlZnQtc3BsaXRcIikgJiYgbWFpblNwbGl0LnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpIHtcclxuXHRcdFx0XHRcdC8vaWYgdGhlIGxlZnQgc2lkZSBiYXIgaXMgY29sbGFwc2VkXHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGxlYWZzW2luZGV4XS5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSArIFwiIGlzIGhpZGRlblwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZihtYWluU3BsaXQ/LmNsYXNzTmFtZS5pbmNsdWRlcyhcIm1vZC1yaWdodC1zcGxpdFwiKSAmJiBtYWluU3BsaXQuc3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xyXG5cdFx0XHRcdFx0Ly9pZiB0aGUgcmlnaHQgc2lkZSBiYXIgaXMgY29sbGFwc2VkXHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGxlYWZzW2luZGV4XS5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSArIFwiIGlzIGhpZGRlblwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAobGVhZlN0eWxlID09IFwibm9uZVwiKSB7XHJcblx0XHRcdFx0XHQvL2lmIHRoZSBsZWFmIGlzIGluIGJhY2tncm91bmQgKGludmlzaWJsZSlcclxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2cobGVhZnNbaW5kZXhdLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5maWxlICsgXCIgaXMgaGlkZGVuXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChsZWFmc1tsZWFmXSA9PSB1bmRlZmluZWQpIHtcclxuXHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHQvL2Vsc2UgKGlmIHZpc2libGUgaW4gZm9yZWdyb3VuZClcclxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2cobGVhZnNbaW5kZXhdLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5maWxlICsgXCIgaXMgaW4gZm9yZWdyb3VuZFwiKTtcclxuXHRcdFx0XHRcdHZpc2libGVMZWFmcy5wdXNoKGxlYWZzW2xlYWZdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdC8vfVxyXG5cdFx0fS8vKi9cclxuXHRcdC8vY29uc29sZS5sb2codmlzaWJsZUxlYWZzKTtcclxuXHRcdHJldHVybiB2aXNpYmxlTGVhZnM7XHJcblx0fVxyXG5cclxuXHRnZXRPcGVuRmlsZUluc3RhbmNlcyhsZWF2ZXM6V29ya3NwYWNlTGVhZltdKTogTWFwPHN0cmluZyxudW1iZXI+IHtcclxuXHJcblx0XHRsZXQgZmlsZUluc3RhbmNlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KFtdKTtcclxuXHRcdFxyXG5cdFx0Ly9jb25zdCBmaWxlSW5zdGFuY2VzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge31cclxuXHJcblx0XHRmb3IgKGxldCBsZWFmID0gMDsgbGVhZiA8IGxlYXZlcy5sZW5ndGg7IGxlYWYrKykge1xyXG5cdFx0XHQvL1RoaXMgaXMgd2hhdCBpcyBjYXVzaW5nIHVuZGVmaW5lZCBlcnJvciBvbiBjbG9zZSBvZiBub3RlXHJcblx0XHRcdC8vd2hlbiB0aGUgbGVhZiBpcyBkZXN0cm95ZWQgb3Igbm90IHRoZWlyIGFueW1vcmUgKGFsc28gY2xvc2Ugbm90ZSBldmVudCksIHlvdSBjYW50IHJlYWQgdGhlIHZpZXdzdGF0ZSBzaW5jZSBpdCBpc24ndCB2aWV3YWJsZVxyXG5cdFx0XHRjb25zdCBmaWxlID0gbGVhdmVzW2xlYWZdLmdldFZpZXdTdGF0ZSgpLnN0YXRlPy5maWxlOyBcclxuXHRcdFx0Y29uc3QgdHlwZSA9IGxlYXZlc1tsZWFmXS5nZXRWaWV3U3RhdGUoKS50eXBlXHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZmlsZUluc3RhbmNlcy5oYXMoZmlsZSkgJiYgZmlsZSAhPSB1bmRlZmluZWQgJiYgdHlwZSA9PSBcIm1hcmtkb3duXCIpIHtcclxuXHRcdFx0XHQvL2ZpbGVJbnN0YW5jZXNbZmlsZV0rKztcclxuXHRcdFx0XHRsZXQgbnVtID0gZmlsZUluc3RhbmNlcy5nZXQoZmlsZSkgKyAxO1xyXG5cdFx0XHRcdGZpbGVJbnN0YW5jZXMuZGVsZXRlKGZpbGUpO1xyXG5cdFx0XHRcdGZpbGVJbnN0YW5jZXMuc2V0KGZpbGUsIG51bSk7XHJcblx0XHRcdH0gXHJcblx0XHRcdGVsc2UgaWYgKGZpbGUgIT0gdW5kZWZpbmVkKXtcclxuXHRcdFx0XHQvL2ZpbGVJbnN0YW5jZXMucHVzaCh7IH0pXHJcblx0XHRcdFx0Ly9maWxlSW5zdGFuY2VzW2ZpbGVdID0gMDtcclxuXHRcdFx0XHRmaWxlSW5zdGFuY2VzLnNldChmaWxlLDEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vVGhpcyBjb25kaXRpb24gaXMgbmVhcmx5IHJpZ2h0XHJcblx0XHRcdFx0Ly9maWxlSW5zdGFuY2VzLnNldChmaWxlQWx0LDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZpbGVJbnN0YW5jZXM7XHJcblx0fVxyXG5cclxuXHQvLyAjcmVnaW9uIExvZyBGdW5jdGlvbnNcclxuXHRcclxuXHQvL09wZW5pbmcgYW5kIGNsb3NpbmcgZmlsZXMgZG9uZSwgYXBhcnQgZnJvbSBob3ZlciBvcGVuIGZpbGUsIGFuZCBsb2dpYyBmb3IgaGF2aW5nIHNjcmVlbiBhdmFpbGFibGUgYnV0IG9ic2lkaWFuIHRhYmJlZCBvdXQgYW5kIG11bHRpIG1vbml0b3IgbW9kZVxyXG5cdC8vSSB0aGluayBvYnNpZGlhbiBpbiBmb3JlZ3JvdW5kIGlzIHNvbWV0aGluZyB0aGF0IGlzIG1vcmUgb2YgYSBzeXN0ZW0gc3BlY2lmaWMgYWN0aW9uIHNvIG1pZ2h0IGhhdmUgdG8gaWdub3JlIHRoYXQgZm9yIG5vdyBidXQgaW5jbHVkZSBjb25kaXRpb24gZm9yIG5vIGxlYWZzIGFjdGl2ZSBhdCBhbGwgKHVuZGVmaW5lZClcclxuXHJcblx0Ly9bYWN0aW9uOjogc3RhcnQsIGVuZCwgb3BlbiwgY2xvc2UsIGNyZWF0ZSwgbW9kaWZ5LCBkZWxldGUsIG1vdmVdXHJcblx0Ly9bbWV0aG9kOjogY29tbWFuZCwgbGlua11cclxuXHQvL2lmIHRocm91Z2ggbGluayBvciBpZiBjb21tYW5kIGJhc2VkIG9uIGEgY2VydGFpbiBwYWdlXHJcblx0Ly9bb3JpZ2luOjogW1tub3RlIGxpbmtdXSwgZmlsZSBleHBsb3JlciwgYmFjayBsaW5rcywgZ3JhcGhdXHJcblxyXG5cdC8vIExvZ2ljIGZvciBvcGVuaW5nIGFuZCBjbG9zaW5nIGZpbGVzXHJcblx0Ly8gb3BlbmVkIGZpbGUgaGFzIGV4dHJhIGNvbmRpdG9uYWwgc3RhdGUgKG1hcmtkb3duICYgb3RoZXIpLCAoaWYgbWFya2Rvd24sIHNob3cgZmlsZSBmcm9tKVxyXG5cdC8vLSBbW0ZpbGVdXSBPcGVuZWQgdGhyb3VnaCBbdmlldzo6IHZpZXdUeXBlXSwgW2xpbms6OiBdIGF0IFtkYXRlOjogWVlZWS1NTS1ERF0gW3RpbWU6OiBISDptbTpzc11cclxuXHJcblx0RmlsZU9wZW5Mb2coZmlsZTpzdHJpbmcsIHByZXZMZWFmRmlsZXM6TGVhZkZpbGVzIHwgdW5kZWZpbmVkKSB7XHJcblx0XHRsZXQgZmlsZW5hbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk/Lm5hbWU7XHJcblx0XHQvKlxyXG5cdFx0aWYgKHByZXZMZWFmRmlsZXMgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHQvL2xvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogT3BlbmVkXVwiO1xyXG5cdFx0XHRpZiAocHJldkxlYWZGaWxlcy5jdXJGaWxlICE9PSB1bmRlZmluZWQgJiYgKSB7XHJcblx0XHRcdFx0bG9nID0gXCJbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV0gIFthY3Rpb246OiBPcGVuZWRdIHRocm91Z2ggW21ldGhvZDo6IFwiICsgcHJldkxlYWZGaWxlcy5jdXJUeXBlICsgXCJdIGZyb20gW29yaWdpbjo6IFtbXCIgKyBwcmV2TGVhZkZpbGVzLmN1ckZpbGUgKyBcIl1dXVwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogT3BlbmVkXSB0aHJvdWdoIFttZXRob2Q6OiBcIiArIHByZXZMZWFmRmlsZXMuY3VyVHlwZSArIFwiXVwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogT3BlbmVkXVwiO1xyXG5cdFx0fS8vKi9cclxuXHRcdGxldCBsb2c6c3RyaW5nO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0bG9nID0gXCJbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV0gIFthY3Rpb246OiBPcGVuZWRdXCI7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXSAgW2FjdGlvbjo6IE9wZW5lZF0nO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8qTE9HSUMgRVJST1JcclxuXHRcdFx0Ly90aGVyZSBpcyBhIHByb2JsZW0gd2hlcmUgaWYgSSByZWFycmFuZ2UgdGhlIGxheW91dCwgaXQgd2lsbCBzYXkgdGhhdCB0aGUgbm90ZSB3YXMgb3BlbmVkIGZyb20gdGhlIHRoaW5nIHRoYXQgcmVhcnJhbmdlZCB0aGUgbGF5b3V0XHJcblx0XHRcdC8vaW5jbHVkZSBvcGVuZWQgZnJvbSByaWJib25cclxuXHRcdFx0Ly9pbmNsdWRlIGFscmVhZHkgb3BlbiBpbiBiYWNrZ3JvdW5kIHNvIG5vdCBvcGVuZWQgZnJvbSBhbnl3aGVyZSAoYnJvdWdodCB0byBmb3JlZ3JvdW5kKVxyXG5cdFx0XHQvL2luY2x1ZGUgZWxzZSBjb25kaXRpb24gZm9yIGFueSBleHRyYSBwbHVnaW4gYWN0aW9ucyAob3BlbmVkIGZyb20gc28gYW5kIHNvIHBsdWdpbilcclxuXHRcdFx0Ly9vcGVuZWQgdGhyb3VnaCBjb21tYW5kXHJcblxyXG5cdFx0XHQvL09wZW5lZCBmcm9tICh0aGUgbm90ZSB0aGF0IGl0IGNhbWUgZnJvbSlcclxuXHRcdFx0XHQvL21hcmtkb3duLCBncmFwaCwgXHJcblx0XHRcdC8vT3BlbmVkIHRocm91Z2ggKGhvdyBpdCB3YXMgb3BlbmVkKVxyXG5cdFx0XHRcdC8vbGluaywgY29tbWFuZCwgYnV0dG9uXHJcblxyXG5cclxuXHRcdCovXHJcblxyXG5cdFx0cmV0dXJuIGxvZztcclxuXHR9XHJcblxyXG5cdC8vLSBbW0ZpbGVdXSBDbG9zZWQgYXQgW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdEZpbGVDbG9zZUxvZyhmaWxlOnN0cmluZykge1xyXG5cdFx0bGV0IGZpbGVuYW1lID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpPy5uYW1lO1xyXG5cdFx0bGV0IGxvZzpzdHJpbmc7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sb2dMaW5rcyA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRsb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZW5hbWUgKyBcIl1dXSAgW2FjdGlvbjo6IENsb3NlZF1cIjtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRsb2cgPSAnW3RhcmdldDo6IFwiJyArIGZpbGUgKyAnXCJdICBbYWN0aW9uOjogQ2xvc2VkXSc7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvL0xvZ2ljIGZvciBtb2RpZnlpbmcgZmlsZXNcclxuXHQvLy0gW1tGaWxlXV0gTW9kaWZpZWQgYXQgW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdEZpbGVNb2RpZnlMb2coZmlsZTpzdHJpbmcpIHtcclxuXHRcdGxldCBmaWxlbmFtZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKT8ubmFtZTtcclxuXHRcdGxldCBsb2c6c3RyaW5nO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0bG9nID0gXCJbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV0gIFthY3Rpb246OiBNb2RpZmllZF1cIjtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRsb2cgPSAnW3RhcmdldDo6IFwiJyArIGZpbGUgKyAnXCJdXV0gIFthY3Rpb246OiBNb2RpZmllZF0nO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGxvZztcclxuXHR9XHJcblxyXG5cdC8vIExvZ2ljIGZvciBjcmVhdGluZyBmaWxlZXNcclxuXHQvLy0gW1tGaWxlXV0gQ3JlYXRlZCBhdCBbZGF0ZTo6IFlZWVktTU0tRERdIFt0aW1lOjogSEg6bW06c3NdXHJcblx0RmlsZUNyZWF0ZUxvZyhmaWxlOnN0cmluZykge1xyXG5cdFx0bGV0IGNyZWF0ZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpO1xyXG5cdFx0Ly9TaG91bGQgSW5jbHVkZSB1c2UgY2FzZXMgZm9yIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgdGhpbmdzIGNyZWF0ZWQsIGUuZy4gaW1hZ2UsIGZpbGUsIGNhbnZhc1xyXG5cdFx0bGV0IGZpbGVOYW1lID0gY3JlYXRlZEZpbGU/LnBhdGg7XHJcblx0XHRsZXQgdHlwZTpzdHJpbmc7XHJcblx0XHRsZXQgbG9nOnN0cmluZztcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sb2dMaW5rcyA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRpZiAoY3JlYXRlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vbGF0ZXIgbG9vayBpbnRvIGFkZGluZyBkaWZmZXJlbnQgdHkgcGVzIG1vcmUgc3BlY2lmaWNhbGx5IGUuZy4gaW1hZ2UsIHBkZiBvciBkaWZmZXJlbnRpYXRpbmcgY2FudmFzIGZyb20gbm9ybWFsIG5vdGVcclxuXHRcdFx0XHRpZiAoY3JlYXRlZEZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcclxuXHRcdFx0XHRcdHR5cGUgPSBcIk5vdGVcIlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHR5cGUgPSBcIkF0dGFjaG1lbnRcIlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKGNyZWF0ZWRGaWxlLCBjcmVhdGVkRmlsZS5leHRlbnNpb24pO1xyXG5cdFx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlTmFtZSArIFwiXV1dICBbdHlwZTo6IFwiICsgdHlwZSArIFwiXSAgW2FjdGlvbjo6IENyZWF0ZWRdXCI7XHJcblx0XHRcdH0gZWxzZSBpZiAoY3JlYXRlZEZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0dHlwZSA9IFwiRm9sZGVyXCI7XHJcblx0XHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXV1dICBbdHlwZTo6ICcgKyB0eXBlICsgJ10gIFthY3Rpb246OiBDcmVhdGVkXSc7XHJcblx0XHRcdH1lbHNlIHtcclxuXHRcdFx0XHR0eXBlID0gXCJPdGhlclwiO1xyXG5cdFx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlTmFtZSArIFwiXV1dICBbdHlwZTo6IFwiICsgdHlwZSArIFwiXSAgW2FjdGlvbjo6IENyZWF0ZWRdXCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZiAoY3JlYXRlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vbGF0ZXIgbG9vayBpbnRvIGFkZGluZyBkaWZmZXJlbnQgdHkgcGVzIG1vcmUgc3BlY2lmaWNhbGx5IGUuZy4gaW1hZ2UsIHBkZiBvciBkaWZmZXJlbnRpYXRpbmcgY2FudmFzIGZyb20gbm9ybWFsIG5vdGVcclxuXHRcdFx0XHRpZiAoY3JlYXRlZEZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcclxuXHRcdFx0XHRcdHR5cGUgPSBcIk5vdGVcIlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHR5cGUgPSBcIkF0dGFjaG1lbnRcIlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChjcmVhdGVkRmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHR0eXBlID0gXCJGb2xkZXJcIjtcclxuXHRcdFx0fWVsc2Uge1xyXG5cdFx0XHRcdHR5cGUgPSBcIk90aGVyXCI7XHJcblx0XHRcdH1cclxuXHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXV1dICBbdHlwZTo6ICcgKyB0eXBlICsgJ10gIFthY3Rpb246OiBDcmVhdGVkXSc7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvLyBMb2dpYyBmb3IgcmVuYW1pbmcvbW92aW5nIGZpbGVzXHJcblx0Ly8tIFtbT2xkRmlsZVBhdGhdXSByZW5hbWVkIFtbTmV3RmlsZXBhdGhdXSBhdCBbZGF0ZTo6IFlZWVktTU0tRERdIFt0aW1lOjogSEg6bW06c3NdXHJcblx0RmlsZU1vdmVMb2coZmlsZTpzdHJpbmcsIG9sZEZpbGU6c3RyaW5nKSB7XHJcblx0XHRsZXQgZmlsZW5hbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk/Lm5hbWU7XHJcblx0XHRsZXQgb2xkRm9sZGVyUGF0aCA9IG9sZEZpbGUucmVwbGFjZSgnLipcXC8nLCBcIlwiKTtcclxuXHRcdGxldCBuZXdGb2xkZXJQYXRoID0gZmlsZS5yZXBsYWNlKGZpbGVuYW1lLCBcIlwiKTtcclxuXHJcblx0XHRsZXQgbG9nOnN0cmluZztcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sb2dMaW5rcyA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRpZiAob2xkRm9sZGVyUGF0aCA9PT0gbmV3Rm9sZGVyUGF0aCB8fCB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSkgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0bG9nID0gXCJbdGFyZ2V0LW9sZDo6IFtbXCIgKyBvbGRGaWxlICsgXCJdXV0gIFthY3Rpb246OiBSZW5hbWVkXSB0byBbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV1cIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRsb2cgPSBcIlt0YXJnZXQtb2xkOjogW1tcIiArIG9sZEZpbGUgKyBcIl1dXSAgW2FjdGlvbjo6IE1vdmVkXSB0byBbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV1cIjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGlmIChvbGRGb2xkZXJQYXRoID09PSBuZXdGb2xkZXJQYXRoKSB7XHJcblx0XHRcdFx0bG9nID0gJ1t0YXJnZXQtb2xkOjogXCInICsgb2xkRmlsZSArICdcIl0gIFthY3Rpb246OiBSZW5hbWVkXSB0byBbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl0nO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGxvZyA9ICdbdGFyZ2V0LW9sZDo6IFwiJyArIG9sZEZpbGUgKyAnXCJdICBbYWN0aW9uOjogTW92ZWRdIHRvIFt0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXSc7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGxvZztcclxuXHR9XHJcblxyXG5cdC8qIExvZ2ljIGZvciBkZWxldGluZyBmaWxlc1xyXG5cdC0gW1tGaWxlXV0gRGVsZXRlZCBhdCBbZGF0ZTo6IFlZWVktTU0tRERdIFt0aW1lOjogSEg6bW06c3NdXHJcblx0UGVyaGFwcyBpbnN0ZWFkIG9mIGRvaW5nIGEgd2lraWxpbmsgdG8gdGhlIG5vdGUgaW4gdGhpcyBjYXNlLCBkbyBhIFxyXG5cdFx0SSBjb3VsZCB0cmVhdCB0aGUgZGVsZXRpbmcgb2YgYSBmaWxlIGFzIGEgbW92ZSwgYW5kIHRoZW4ganVzdCBjcmVhdGUgYSB0cmFzaCBiaW4gZm9sZGVyIGxpa2UgSSB3YXMgdGhpbmtpbmcgb2YgZG9pbmcgYW55d2F5LCB3aGljaCBjb3VsZCBiZSBhIHNlcGVyYXRlIHZhdWx0LCBcclxuXHRcdHNvIEkgbW92ZSB0aGUgbm90ZSBhbGwgdGhlIHdheSB0byBhIGRpZmZlcmVudCBvbmUsIHdpdGggYSBuZXcgbGluayB0byB0aGF0IGxvY2F0aW9uIHNvIEkgY2FuIHN0aWxsIHJlZmVyIHRvIGl0LCBvciBrZWVwIGEgZm9sZGVyIGluIHRoZSBzYW1lIHZhdWx0IGZvciBpdCBcclxuXHRcdChsYXRlciBvbiBtb3ZlIGl0LCBhc3NpZ24gYSB0cmFzaCBsb2NhdGlvbiBpbiBzZXR0aW5ncywgb3IgdXNlIHN0YW5kYXJkIC50cmFzaCBmb2xkZXIgb3B0aW9uID0+IGZpbmQgb3V0IGhvdyB0byBhY3RpdmF0ZSBpbiBzZXR0aW5ncyA9PiBmaWxlcyBhbmQgbGlua3MgdGFiIGluIHNldHRpbmdzISkqL1xyXG5cdEZpbGVEZWxldGVMb2coZmlsZTpzdHJpbmcpIHtcclxuXHRcdGxldCBsb2c6c3RyaW5nO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0bG9nID0gXCJbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcIl1dXSAgW2FjdGlvbjo6IERlbGV0ZWRdXCI7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXSAgW2FjdGlvbjo6IERlbGV0ZWRdJztcclxuXHRcdH1cclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvLyBMb2dpYyBmb3IgdGhlIG9ic2lkaWFuIGFwcCBvcGVuaW5nIGFuZCBjbG9zaW5nXHJcblx0Ly9GaW5kIG91dCBob3cgdG8gZG8gdGhpcyBvbiBzdGFydCBhbmQgc3RvcFxyXG5cdC8vYWRkIG1heWJlIHNlc3Npb24gaW5mb3JtYXRpb24gZm9yIHRoZSBvdGhlciBsb2dzLCBzbyBJIGNhbiB0ZWxsIGlmIHRoZXkgYmVsb25nIHRvIGEgY2VydGFpbiBzZXNzaW9uIG9yIG5vdCwgYnV0IHRoZW4gbWF5YmUgSSBuZWVkIG1vcmUgc3RhdGVzIHRoYW4gc3RhcnQgYW5kIHN0b3BwZWQsIGUuZy4gcGF1c2VkLCByZXN1bWVkLCBhcyB3ZWxsXHJcblx0Ly8gY2xvc2UgYWxsIGZpbGVzIG9uIHBhdXNlLCBvcGVuIGFsbCBmaWxlcyBvbiByZXN1bWVcclxuXHRPYnNpZGlhblN0YXJ0TG9nKCl7XHJcblx0XHRsZXQgbG9nID0gXCJbdGFyZ2V0OjogT2JzaWRpYW5dICBbYWN0aW9uOjogU3RhcnRlZF1cIjtcclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHRPYnNpZGlhblN0b3BMb2coKSB7XHJcblx0XHRsZXQgbG9nID0gXCJbdGFyZ2V0OjogT2JzaWRpYW5dICBbYWN0aW9uOjogU3RvcHBlZF1cIjtcclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cdC8vICNlbmRyZWdpb25cclxufVxyXG5cclxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuc2V0VGV4dCgnV29haCEnKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE9ic2lkaWFuTm90ZUxvZztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogT2JzaWRpYW5Ob3RlTG9nKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8qbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTZXR0aW5nICMxJylcclxuXHRcdFx0LnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXHJcblx0XHRcdC5hZGRUZXh0KCAodGV4dCkgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBzZWNyZXQnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFxyXG5cdFx0XHQuc2V0TmFtZSgnTG9nIEZpbGUgRm9sZGVyJylcclxuXHRcdFx0LnNldERlc2MoJ1RoZSBsb2NhdGlvbiBmb3Igc3RvcmluZyBMb2cnKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuXHRcdFx0XHQuYWRkT3B0aW9ucyh7XHJcblx0XHRcdFx0XHR0aGlzLmFwcC52YXVsdFxyXG5cdFx0XHRcdFx0XHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxyXG5cdFx0XHRcdFx0XHQuZmlsdGVyKChmKSA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcilcclxuXHRcdFx0XHRcdFx0Lm1hcCgoZikgPT4gZi5wYXRoKS5cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVGb3JtYXQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubG9nRmlsZVBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTsqL1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTG9nIEZpbGUgRm9ybWF0JylcclxuXHRcdFx0LnNldERlc2MoJ1RoZSBmb3JtYXQgZm9yIHRoZSBsb2cgZmlsZScpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRXhhbXBsZTogRm9sZGVyL2xvZy5tZCcpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxvZ0ZpbGVQYXRoKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxvZ0ZpbGVQYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTGlua3Mgb3IgU3RyaW5ncycpXHJcblx0XHRcdC5zZXREZXNjKCdXaGV0aGVyIHRvIGhhdmUgbGlua3MgdG8gZmlsZXMgZW5hYmxlZCBvciBqdXN0IHRoZSBwYXRocyB0byBmaWxlcycpXHJcblx0XHRcdC5hZGRUb2dnbGUoICh0b2dnbGUpID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dMaW5rcylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dMaW5rcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBdUJPO0FBeUJQLElBQU0sbUJBQW9DO0FBQUEsRUFDekMsV0FBVztBQUFBLEVBQ1gsYUFBYTtBQUFBLEVBQ2IsaUJBQWlCO0FBQUEsRUFDakIsVUFBVTtBQUNYO0FBRUEsSUFBcUIsa0JBQXJCLGNBQTZDLHVCQUFPO0FBQUEsRUFBcEQ7QUFBQTtBQUdDLHFCQUF5QixDQUFDO0FBQUE7QUFBQTtBQUFBLEVBSTFCLE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBeUR4QixTQUFLLGNBQWMsSUFBSSxpQkFBaUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUV2RCxTQUFLLElBQUksVUFBVSxjQUFlLE1BQU07QUFFdkMsV0FBSyxzQkFBc0I7QUFDM0IsV0FBSyxtQkFBbUI7QUFDeEIsV0FBSyxlQUFlLE9BQU8sS0FBSyxjQUFjLEtBQUssQ0FBQztBQUdwRCxXQUFLLHdCQUF3QjtBQUFBLElBQzlCLENBQUM7QUFBQSxFQUNGO0FBQUEsRUFFQSxXQUFXO0FBRVYsU0FBSyxtQkFBbUI7QUFDeEIsU0FBSyxlQUFlLE1BQU0sS0FBSyxjQUFjLElBQUksQ0FBQztBQUVsRCxTQUFLLGVBQWUsS0FBSyxnQkFBZ0IsQ0FBQztBQUFBLEVBQzNDO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8s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
