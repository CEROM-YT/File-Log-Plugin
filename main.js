/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ObsidianNoteLog
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default",
  logFilePath: "",
  dailyNoteFormat: "YYYY-MM-DD [LOG]",
  logLinks: false
};
var ObsidianNoteLog = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.leafFiles = [];
  }
  //this.app.command.g
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      this.registerGeneralEvents();
      this.initialiseLeafFile();
      this.logLeafChanges(false, this.processLeaves(false));
      this.registerOpenCloseEvents();
    });
  }
  onunload() {
    this.initialiseLeafFile();
    this.logLeafChanges(true, this.processLeaves(true));
    this.writeChangelog(this.ObsidianStopLog());
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // #endregion
  // #region 
  registerGeneralEvents() {
    this.writeChangelog(this.ObsidianStartLog());
    this.registerEvent(this.app.vault.on("create", (file) => {
      this.writeChangelog(this.FileCreateLog(file.path));
    }));
    this.registerEvent(this.app.vault.on("rename", (file, oldName) => {
      this.writeChangelog(this.FileMoveLog(file.path, oldName));
    }));
    this.registerEvent(this.app.vault.on("modify", (file) => {
      let logfile = window.moment().format(this.settings.logFilePath);
      if (file.path != logfile) {
        this.writeChangelog(this.FileModifyLog(file.path));
      }
    }));
    this.registerEvent(this.app.vault.on("delete", (file) => {
      this.writeChangelog(this.FileDeleteLog(file.path));
    }));
    this.registerEvent(this.app.workspace.on("quit", () => {
      this.initialiseLeafFile();
      this.logLeafChanges(true, this.processLeaves(true));
      this.writeChangelog(this.ObsidianStopLog());
    }));
  }
  registerOpenCloseEvents() {
    let hover = /* @__PURE__ */ new Map();
    const debouncedActiveLeafChange = (0, import_obsidian.debounce)(() => {
      this.initialiseLeafFile();
      this.logLeafChanges(false, this.processLeaves(false));
    }, 100);
    this.registerEvent(this.app.workspace.on("active-leaf-change", (leaf) => {
      this.initialiseLeafFile();
      if (leaf !== void 0) {
        let newActiveIndex = this.leafFiles.findIndex((leafdata) => leafdata.curLeaf === leaf);
        let lastActive = this.leafFiles.find((leafdata) => leafdata.active === true);
        let lastActiveIndex = this.leafFiles.findIndex((leafdata) => leafdata.active === true);
        this.leafFiles[newActiveIndex].active = true;
        if (lastActive !== void 0) {
          this.leafFiles[lastActiveIndex].active = false;
          this.leafFiles[newActiveIndex].lastLeaf = lastActive.curLeaf;
        }
      } else {
      }
    }));
    this.registerEvent(this.app.workspace.on("layout-change", () => {
      debouncedActiveLeafChange();
    }));
    this.registerEvent(this.app.workspace.on("resize", () => {
      debouncedActiveLeafChange();
    }));
    this.registerEvent(this.app.workspace.on("file-open", (file) => {
      debouncedActiveLeafChange();
    }));
  }
  // #endregion
  // #region LeafFile Functions
  /*
  get all the leaves that currently exist and are viewable and add them to array, if they aren't in there yet, then add them newly, with initialised values
  */
  initialiseLeafFile() {
    let allLeaves = this.getVisibleLeaves(this.getLeafsInWorkspace());
    for (let leaf = 0; leaf < allLeaves.length; leaf++) {
      let thisLeaf = allLeaves[leaf];
      let thisLeafData = this.leafFiles.find((leafdata) => leafdata.curLeaf === thisLeaf);
      if (thisLeafData === void 0) {
        let newLeaf = {
          curLeaf: thisLeaf,
          lastLeaf: void 0,
          curFile: void 0,
          curType: "empty",
          prevFile: void 0,
          prevType: "empty",
          active: false,
          logged: [true, true],
          inview: true
          //:false
        };
        this.leafFiles.push(newLeaf);
      }
    }
  }
  /*
  if a leaf has changed from how it was before, update the details stored about that leaf
  */
  processLeaves(end) {
    var _a, _b, _c, _d, _e;
    let allLeaves = this.getLeafsInWorkspace();
    let visibleLeaves = this.getVisibleLeaves(allLeaves);
    let deleteLeafFile = [];
    let occcurences = this.getOpenFileInstances(visibleLeaves);
    for (let leaf = 0; leaf < this.leafFiles.length; leaf++) {
      let leafdata = this.leafFiles[leaf];
      let viewable = visibleLeaves.find((visibleLeaf) => visibleLeaf === leafdata.curLeaf);
      if (leafdata.curFile !== ((_a = leafdata.curLeaf.getViewState()) == null ? void 0 : _a.state.file) || leafdata.curType != leafdata.curLeaf.getViewState().type || leafdata.inview === true && viewable === void 0 || leafdata.inview === false && viewable !== void 0 || end === true) {
        leafdata.logged = [true, true];
        let newFileOccurence = this.leafFiles.find((leafData) => {
          var _a2, _b2;
          return leafData.curFile === ((_a2 = leafdata.curLeaf.getViewState()) == null ? void 0 : _a2.state.file) && leafData.inview === true && leafData.curType === "markdown" && ((_b2 = leafdata.curLeaf.getViewState()) == null ? void 0 : _b2.type) === "markdown";
        });
        if (newFileOccurence === void 0 && ((_b = leafdata.curLeaf.getViewState()) == null ? void 0 : _b.type) == "markdown" && (leafdata.curFile !== ((_c = leafdata.curLeaf.getViewState().state) == null ? void 0 : _c.file) || leafdata.inview === false)) {
          leafdata.logged[0] = false;
          leafdata.inview = true;
        }
        if ((leafdata.curFile !== void 0 && occcurences.get(leafdata.curFile) === void 0 || viewable === void 0) && leafdata.curType == "markdown") {
          leafdata.inview = false;
          let oldFileOccurence = this.leafFiles.find((leafData) => leafData.curFile === leafdata.curFile && leafData.inview === true);
          if (oldFileOccurence === void 0) {
            leafdata.logged[1] = false;
            if (viewable === void 0) {
              deleteLeafFile.push(leaf);
            }
          }
        }
        if (end === true) {
          if (leafdata.curFile !== void 0 && occcurences.get(leafdata.curFile) !== void 0) {
            leafdata.prevFile = leafdata.curFile;
            leafdata.prevType = leafdata.curType;
            leafdata.curFile = (_d = leafdata.curLeaf.getViewState().state) == null ? void 0 : _d.file;
            leafdata.curType = leafdata.curLeaf.getViewState().type;
            occcurences.set(leafdata.curFile, void 0);
          }
        } else if (end === false) {
          leafdata.prevFile = leafdata.curFile;
          leafdata.prevType = leafdata.curType;
          leafdata.curFile = (_e = leafdata.curLeaf.getViewState().state) == null ? void 0 : _e.file;
          leafdata.curType = leafdata.curLeaf.getViewState().type;
        }
      }
    }
    return deleteLeafFile;
  }
  /*
  Check all the changes that have been recorded for needing updates, and then output the result of that
  */
  logLeafChanges(end, deletedLeaf) {
    for (let leaf = 0; leaf < this.leafFiles.length; leaf++) {
      let leafdata = this.leafFiles[leaf];
      if (end === true && leafdata.inview === true && leafdata.prevType === "markdown") {
        leafdata.logged[1] = false;
        leafdata.inview = false;
      }
      if (leafdata.logged[1] === false && leafdata.prevFile !== void 0) {
        this.writeChangelog(this.FileCloseLog(leafdata.prevFile));
        leafdata.logged[1] = true;
      }
      if (leafdata.logged[0] === false && leafdata.curFile !== void 0) {
        this.writeChangelog(this.FileOpenLog(leafdata.curFile, this.leafFiles.find((data) => data.curLeaf === leafdata.lastLeaf)));
        leafdata.logged[0] = true;
      }
    }
    for (let data = deletedLeaf.length - 1; data > -1; data--) {
      this.leafFiles.splice(deletedLeaf[data], 1);
    }
  }
  //#endregion 
  // #region File Writing
  //Log building Logic
  async writeInFile(filePath, content) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile) {
      await this.app.vault.append(file, content);
    } else {
      new import_obsidian.Notice("Couldn't write Note log: check the file path, file might not exist");
    }
  }
  buildChangelog(logText) {
    let logFormat = "[[date::] YYYY-MM-DD[]] [at] [[time::] HH:mm:ss[]] [[timezone::]Z[]]";
    let changelogContent = ``;
    const humanTime = window.moment().format(logFormat);
    changelogContent += `- ${humanTime} \xB7 ${logText}
`;
    return changelogContent;
  }
  async writeChangelog(logText) {
    const log = this.buildChangelog(logText);
    let file = window.moment().format(this.settings.logFilePath);
    await this.writeInFile(file, log);
  }
  // #endregion
  //Open and Closing 
  //still have not factured in hover open notes
  getLeafsInWorkspace() {
    let leafsInWorkspace = [];
    leafsInWorkspace = this.app.workspace.getLeavesOfType("markdown");
    return leafsInWorkspace;
  }
  getVisibleLeaves(leafs) {
    var _a, _b, _c, _d;
    let visibleLeafs = [];
    for (let leaf = 0; leaf < leafs.length; leaf++) {
      let leafStyle = (_a = leafs[leaf].view.containerEl.parentElement) == null ? void 0 : _a.style.display;
      let mainSplit = (_d = (_c = (_b = leafs[leaf].view.containerEl.parentElement) == null ? void 0 : _b.parentElement) == null ? void 0 : _c.parentElement) == null ? void 0 : _d.parentElement;
      if ((mainSplit == null ? void 0 : mainSplit.className.includes("mod-left-split")) && mainSplit.style.display == "none") {
      } else if ((mainSplit == null ? void 0 : mainSplit.className.includes("mod-right-split")) && mainSplit.style.display == "none") {
      } else if (leafStyle == "none") {
      } else if (leafs[leaf] == void 0) {
      } else {
        visibleLeafs.push(leafs[leaf]);
      }
    }
    return visibleLeafs;
  }
  getOpenFileInstances(leaves) {
    var _a;
    let fileInstances = /* @__PURE__ */ new Map([]);
    for (let leaf = 0; leaf < leaves.length; leaf++) {
      const file = (_a = leaves[leaf].getViewState().state) == null ? void 0 : _a.file;
      const type = leaves[leaf].getViewState().type;
      if (fileInstances.has(file) && file != void 0 && type == "markdown") {
        let num = fileInstances.get(file) + 1;
        fileInstances.delete(file);
        fileInstances.set(file, num);
      } else if (file != void 0) {
        fileInstances.set(file, 1);
      } else {
      }
    }
    return fileInstances;
  }
  // #region Log Functions
  //Opening and closing files done, apart from hover open file, and logic for having screen available but obsidian tabbed out and multi monitor mode
  //I think obsidian in foreground is something that is more of a system specific action so might have to ignore that for now but include condition for no leafs active at all (undefined)
  //[action:: start, end, open, close, create, modify, delete, move]
  //[method:: command, link]
  //if through link or if command based on a certain page
  //[origin:: [[note link]], file explorer, back links, graph]
  // Logic for opening and closing files
  // opened file has extra conditonal state (markdown & other), (if markdown, show file from)
  //- [[File]] Opened through [view:: viewType], [link:: ] at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileOpenLog(file, prevLeafFiles) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Opened]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Opened]';
    }
    return log;
  }
  //- [[File]] Closed at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileCloseLog(file) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Closed]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Closed]';
    }
    return log;
  }
  //Logic for modifying files
  //- [[File]] Modified at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileModifyLog(file) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "|" + filename + "]]]  [action:: Modified]";
    } else {
      log = '[target:: "' + file + '"]]]  [action:: Modified]';
    }
    return log;
  }
  // Logic for creating filees
  //- [[File]] Created at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileCreateLog(file) {
    let createdFile = this.app.vault.getAbstractFileByPath(file);
    let fileName = createdFile == null ? void 0 : createdFile.path;
    let type;
    let log;
    if (this.settings.logLinks === true) {
      if (createdFile instanceof import_obsidian.TFile) {
        if (createdFile.extension === "md") {
          type = "Note";
        } else {
          type = "Attachment";
        }
        log = "[target:: [[" + file + "|" + fileName + "]]]  [type:: " + type + "]  [action:: Created]";
      } else if (createdFile instanceof import_obsidian.TFolder) {
        type = "Folder";
        log = '[target:: "' + file + '"]]]  [type:: ' + type + "]  [action:: Created]";
      } else {
        type = "Other";
        log = "[target:: [[" + file + "|" + fileName + "]]]  [type:: " + type + "]  [action:: Created]";
      }
    } else {
      if (createdFile instanceof import_obsidian.TFile) {
        if (createdFile.extension === "md") {
          type = "Note";
        } else {
          type = "Attachment";
        }
      } else if (createdFile instanceof import_obsidian.TFolder) {
        type = "Folder";
      } else {
        type = "Other";
      }
      log = '[target:: "' + file + '"]]]  [type:: ' + type + "]  [action:: Created]";
    }
    return log;
  }
  // Logic for renaming/moving files
  //- [[OldFilePath]] renamed [[NewFilepath]] at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  FileMoveLog(file, oldFile) {
    var _a;
    let filename = (_a = this.app.vault.getAbstractFileByPath(file)) == null ? void 0 : _a.name;
    let oldFolderPath = oldFile.replace(".*/", "");
    let newFolderPath = file.replace(filename, "");
    let log;
    if (this.settings.logLinks === true) {
      if (oldFolderPath === newFolderPath || this.app.vault.getAbstractFileByPath(file) instanceof import_obsidian.TFolder) {
        log = "[target-old:: [[" + oldFile + "]]]  [action:: Renamed] to [target:: [[" + file + "|" + filename + "]]]";
      } else {
        log = "[target-old:: [[" + oldFile + "]]]  [action:: Moved] to [target:: [[" + file + "|" + filename + "]]]";
      }
    } else {
      if (oldFolderPath === newFolderPath) {
        log = '[target-old:: "' + oldFile + '"]  [action:: Renamed] to [target:: "' + file + '"]';
      } else {
        log = '[target-old:: "' + oldFile + '"]  [action:: Moved] to [target:: "' + file + '"]';
      }
    }
    return log;
  }
  /* Logic for deleting files
  - [[File]] Deleted at [date:: YYYY-MM-DD] [time:: HH:mm:ss]
  Perhaps instead of doing a wikilink to the note in this case, do a 
  	I could treat the deleting of a file as a move, and then just create a trash bin folder like I was thinking of doing anyway, which could be a seperate vault, 
  	so I move the note all the way to a different one, with a new link to that location so I can still refer to it, or keep a folder in the same vault for it 
  	(later on move it, assign a trash location in settings, or use standard .trash folder option => find out how to activate in settings => files and links tab in settings!)*/
  FileDeleteLog(file) {
    let log;
    if (this.settings.logLinks === true) {
      log = "[target:: [[" + file + "]]]  [action:: Deleted]";
    } else {
      log = '[target:: "' + file + '"]  [action:: Deleted]';
    }
    return log;
  }
  // Logic for the obsidian app opening and closing
  //Find out how to do this on start and stop
  //add maybe session information for the other logs, so I can tell if they belong to a certain session or not, but then maybe I need more states than start and stopped, e.g. paused, resumed, as well
  // close all files on pause, open all files on resume
  ObsidianStartLog() {
    let log = "[target:: Obsidian]  [action:: Started]";
    return log;
  }
  ObsidianStopLog() {
    let log = "[target:: Obsidian]  [action:: Stopped]";
    return log;
  }
  // #endregion
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Log File Format").setDesc("The format for the log file").addText((text) => text.setPlaceholder("Example: Folder/log.md").setValue(this.plugin.settings.logFilePath).onChange(async (value) => {
      this.plugin.settings.logFilePath = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Links or Strings").setDesc("Whether to have links to files enabled or just the paths to files").addToggle((toggle) => toggle.setValue(this.plugin.settings.logLinks).onChange(async (value) => {
      this.plugin.settings.logLinks = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgXHJcblx0QXBwLCBcclxuXHRFZGl0b3IsIFxyXG5cdE1hcmtkb3duVmlldywgXHJcblx0TW9kYWwsIFxyXG5cdE5vdGljZSwgXHJcblx0UGx1Z2luLCBcclxuXHRQbHVnaW5NYW5pZmVzdCxcclxuXHRQbHVnaW5TZXR0aW5nVGFiLCBcclxuXHRTZXR0aW5nLCBcclxuXHRkZWJvdW5jZSwgXHJcblx0VEZpbGUsIFxyXG5cdFdvcmtzcGFjZSwgXHJcblx0V29ya3NwYWNlTGVhZiwgXHJcblx0VmlldyxcclxuXHRNYXJrZG93bkZpbGVJbmZvLFxyXG5cdFRGb2xkZXIsXHJcblx0VEFic3RyYWN0RmlsZSxcclxuXHRIb3ZlclBvcG92ZXIsXHJcblx0Q29tbWFuZCxcclxuXHRXb3Jrc3BhY2VXaW5kb3csXHJcblx0SG92ZXJMaW5rU291cmNlLFxyXG5cdEhvdmVyUGFyZW50XHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG4vLyBQYXJzZVlhbWwsIFxyXG5cclxuaW50ZXJmYWNlIExlYWZGaWxlcyB7XHJcblx0Y3VyTGVhZjogV29ya3NwYWNlTGVhZjtcclxuXHRsYXN0TGVhZjogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZDtcclxuXHRjdXJGaWxlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0Y3VyVHlwZTpzdHJpbmc7XHJcblx0cHJldkZpbGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHRwcmV2VHlwZTogc3RyaW5nOy8vc2VlIHdoYXQgaXQgY2hhbmdlZCBmcm9tIGlmIHN3aXRjaGluZyB0eXBlIG9mIHZpZXdcclxuXHRhY3RpdmU6Ym9vbGVhbjtcclxuXHRsb2dnZWQ6Ym9vbGVhbltdOy8vZmFsc2Ugd2hlbiBhbiB1cGRhdGVkIGxvZyBuZWVkcyB0byBiZSBnaXZlblxyXG5cdGludmlldzpib29sZWFuO1xyXG5cdC8vc3RhcnQ6Ym9vbGVhbjtcclxufVxyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTm90ZUxvZ1NldHRpbmdzIHtcclxuXHRteVNldHRpbmc6IHN0cmluZztcclxuXHRsb2dGaWxlUGF0aDogc3RyaW5nO1xyXG5cdGRhaWx5Tm90ZUZvcm1hdDogc3RyaW5nO1xyXG5cdGxvZ0xpbmtzOmJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE5vdGVMb2dTZXR0aW5ncyA9IHtcclxuXHRteVNldHRpbmc6ICdkZWZhdWx0JyxcclxuXHRsb2dGaWxlUGF0aDogJycsXHJcblx0ZGFpbHlOb3RlRm9ybWF0OiAnWVlZWS1NTS1ERCBbTE9HXScsXHJcblx0bG9nTGlua3M6IGZhbHNlXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2lkaWFuTm90ZUxvZyBleHRlbmRzIFBsdWdpbiB7XHJcblx0Ly8gI3JlZ2lvbiBJbnRpYWxpc2F0aW9uIG9mIHBsdWdpblxyXG5cdHNldHRpbmdzOiBOb3RlTG9nU2V0dGluZ3M7XHJcblx0bGVhZkZpbGVzOiBMZWFmRmlsZXNbXSA9IFtdO1xyXG5cclxuXHQvL3RoaXMuYXBwLmNvbW1hbmQuZ1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0LypcclxuXHRcdC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cclxuXHRcdGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignZGljZScsICdTYW1wbGUgUGx1Z2luJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGljb24uXHJcblx0XHRcdG5ldyBOb3RpY2UoJ1RoaXMgaXMgYSBub3RpY2UhJyk7XHJcblx0XHR9KTtcclxuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXHJcblx0XHRyaWJib25JY29uRWwuYWRkQ2xhc3MoJ215LXBsdWdpbi1yaWJib24tY2xhc3MnKTtcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxyXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcblx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnU3RhdHVzIEJhciBUZXh0Jyk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2ltcGxlIGNvbW1hbmQgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGFueXdoZXJlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4tc2FtcGxlLW1vZGFsLXNpbXBsZScsXHJcblx0XHRcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoc2ltcGxlKScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0Ly8gVGhpcyBhZGRzIGFuIGVkaXRvciBjb21tYW5kIHRoYXQgY2FuIHBlcmZvcm0gc29tZSBvcGVyYXRpb24gb24gdGhlIGN1cnJlbnQgZWRpdG9yIGluc3RhbmNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXHJcblx0XHRcdG5hbWU6ICdTYW1wbGUgZWRpdG9yIGNvbW1hbmQnLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xyXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKCdTYW1wbGUgRWRpdG9yIENvbW1hbmQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHQvLyBUaGlzIGFkZHMgYSBjb21wbGV4IGNvbW1hbmQgdGhhdCBjYW4gY2hlY2sgd2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwIGFsbG93cyBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmRcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXHJcblx0XHRcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoY29tcGxleCknLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXHJcblx0XHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XHJcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXHJcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyBmYWxzZSwgdGhlbiB3ZSB3YW50IHRvIGFjdHVhbGx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cclxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcclxuXHRcdFx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVySW50ZXJ2YWwod2luZG93LnNldEludGVydmFsKCgpID0+IGNvbnNvbGUubG9nKCdzZXRJbnRlcnZhbCcpLCA1ICogNjAgKiAxMDAwKSk7XHJcblx0XHQqL1xyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcdFxyXG5cdFx0XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSggKCkgPT4ge1xyXG5cdFx0XHQvL09ubHkgc2hvdyBjcmVhdGUgZXZlbnRzIGFmdGVyIHRoZSBmaWxlIGhhcyBiZWVuIGxvYWRlZFxyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyR2VuZXJhbEV2ZW50cygpO1xyXG5cdFx0XHR0aGlzLmluaXRpYWxpc2VMZWFmRmlsZSgpO1xyXG5cdFx0XHR0aGlzLmxvZ0xlYWZDaGFuZ2VzKGZhbHNlLCB0aGlzLnByb2Nlc3NMZWF2ZXMoZmFsc2UpKTtcclxuXHRcdFx0Ly9sZXQgbGVhZkZpbGVzOkxlYWZGaWxlc1tdID0gW107XHJcblx0XHRcdC8vdGhpcy5sZWFmRmlsZXMgPSAvL2luaXRpYWxpc2UgbGVhZnMsIGFuZCB0aGVuIGxvZyB0aG9zZSBjaGFuZ2VzXHJcblx0XHRcdHRoaXMucmVnaXN0ZXJPcGVuQ2xvc2VFdmVudHMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvL1BsdWdpbiBkaXNhYmxlZFxyXG5cdFx0dGhpcy5pbml0aWFsaXNlTGVhZkZpbGUoKTtcclxuXHRcdHRoaXMubG9nTGVhZkNoYW5nZXModHJ1ZSwgdGhpcy5wcm9jZXNzTGVhdmVzKHRydWUpKTtcclxuXHRcdC8vdGhpcy5sZWFmRmlsZXMgPSBcclxuXHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5PYnNpZGlhblN0b3BMb2coKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvLyAjZW5kcmVnaW9uXHJcblxyXG5cdC8vICNyZWdpb24gXHJcblxyXG5cdHJlZ2lzdGVyR2VuZXJhbEV2ZW50cygpIHtcclxuXHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5PYnNpZGlhblN0YXJ0TG9nKCkpO1xyXG5cclxuXHRcdC8vTW9uaXRvcnMgRmlsZXMgY3JlYXRlZCB3aGlsZSBhcHBsaWNhdGlvbiBydW5uaW5nIGFuZCBub3QgZHVyaW5nIHN0YXJ0IHVwXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgKGZpbGU6VEFic3RyYWN0RmlsZSkgPT4ge1xyXG5cdFx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuRmlsZUNyZWF0ZUxvZyhmaWxlLnBhdGgpKTtcclxuXHRcdH0pKTtcclxuXHJcblx0XHQvKiBNb3ZlL3JlbmFtZSBGaWxlIEV2ZW50c1xyXG5cdFx0Z2V0IG9sZCBwYXRoLCB0aGVuIHdoYXQgdGhlIG5ldyBwYXRoIHdpbGwgYmVcclxuXHRcdFRoaXMgaWRlYSBtaWdodCBiZSBzY3JhcGVkIGJlY2F1c2Ugc2F5IEkgaGF2ZSBhIGxvdCBvZiBmaWxlcyBhbmQgYSBsb3Qgb2YgbG9ncywgb2JzaWRpYW4gYXV0byB1cGRhdGVzIGxpbmtzLCBcclxuXHRcdFx0c28gZXZlbiBzaG93aW5nIHRoYXQgd291bGQgY2F1c2UgbGFnLCBhcyB0aGUgYXBwbGljYXRpb24gdHJpZXMgdG8gdXBkYXRlIGFsbCB0aGUgbGlua3NcclxuXHRcdFx0aW5zdGVhZCBJIHNob3VsZCBzdG9yZSB0aGUgbmFtZXMgYXMgc3RyaW5ncyBhbmQgbm90IGxpbmtzLCBqdXN0IHRvIHNob3cgd2hhdCB0aGUgdGV4dCBzYWlkIGJ1dCBub3QgdGhlIGFjdHVhbCBsaW5rXHJcblx0XHRcdGJlY2F1c2Ugd2Ugd2FudCB0aGUgbG9nIHRvIGJlIGEgcmVjb3JkIG9mIHRoZSByZW5hbWluZyBhbmQgbW92aW5nLCBmb3IgdGhlIGluYm94IGZpbHRlcmluZyBwcm9jZXNzIGZvciBleGFtcGxlLCB0byBzZWVcclxuXHRcdFx0d2hhdCBzdGFnZXMgaXQgaGFzIGdvbmUgdGhyb3VnaCwgb3IgZm9yIGEgZmlsZSwgaG93IHRoZSBuYW1lIGZvciB0aGUgY29uY2VwdCBoYXMgY2hhbmdlZCBvdmVyIHRpbWUsIGFsdGhvdWdoIHRoaXMgd291bGRcclxuXHRcdFx0bW9zdGx5IGJlIG1pbmltaXNlZCBJIHRoaW5rIGJ1dCBJJ20gbm90IHN1cmUsIG1vc3Qgb2YgdGhpcyBwcm9ncmFtIGlzIHRoaW5raW5nIGp1c3QgaW4gY2FzZSovXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKGZpbGU6VEFic3RyYWN0RmlsZSwgb2xkTmFtZTpzdHJpbmcpID0+IHtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcInJlbmFtZWQ6IFwiICsgZmlsZS5wYXRoICsgXCIgZnJvbSBcIiArIG9sZE5hbWUpO1xyXG5cdFx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuRmlsZU1vdmVMb2coZmlsZS5wYXRoLCBvbGROYW1lKSk7XHJcblx0XHR9KSk7IFxyXG5cclxuXHRcdC8qIE1vZGlmeSBGaWxlIEV2ZW50c1xyXG5cdFx0XHRUaGUgZXZlbnQgaXMgY2FycmllZCBvdXQgZXZlcnkgMiBzZWNvbmRzLCBhbmQgY3VycmVudGx5IGlmIGVkaXRpbmcgZm9yIGEgbG9uZyB0aW1lIGl0IHdpbGwgc2hvdyBhbGwgdGhvc2UgZGV0YWlsc1xyXG5cdFx0YmFyZSBpbiBtaW5kIHRoYXQgdGhlIGFjY3VyYWN5IG9mIHRoZSBpbmZvcm1hdGlvbiB3b3VsZCBiZSBvZiBieSArLSAyIHNlY29uZHMgYXQgdGhlIHN0YXJ0IGFuZCBlbmQgdGltZXMgb2YgYSBtb2RpZmljYXRpb24gYmxvY2sqL1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwibW9kaWZ5XCIsIChmaWxlOlRBYnN0cmFjdEZpbGUpID0+IHtcclxuXHRcdFx0bGV0IGxvZ2ZpbGUgPSB3aW5kb3cubW9tZW50KCkuZm9ybWF0KHRoaXMuc2V0dGluZ3MubG9nRmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZS5wYXRoICE9IGxvZ2ZpbGUpIHtcclxuXHRcdFx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuRmlsZU1vZGlmeUxvZyhmaWxlLnBhdGgpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSkpO1xyXG5cclxuXHRcdC8vIERlbGV0ZSBGaWxlIEV2ZW50c1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIChmaWxlOlRBYnN0cmFjdEZpbGUpID0+IHtcclxuXHRcdFx0dGhpcy53cml0ZUNoYW5nZWxvZyh0aGlzLkZpbGVEZWxldGVMb2coZmlsZS5wYXRoKSk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0Ly9XaGVuIGFwcGxpY2F0aW9uIHF1aXRzXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwicXVpdFwiLCAoKSA9PiB7XHJcblx0XHRcdC8vXHJcblx0XHRcdHRoaXMuaW5pdGlhbGlzZUxlYWZGaWxlKCk7XHJcblx0XHRcdHRoaXMubG9nTGVhZkNoYW5nZXModHJ1ZSwgdGhpcy5wcm9jZXNzTGVhdmVzKHRydWUpKTtcclxuXHJcblx0XHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5PYnNpZGlhblN0b3BMb2coKSk7XHJcblx0XHR9KSlcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyT3BlbkNsb3NlRXZlbnRzKCkge1xyXG5cclxuXHRcdGxldCBob3ZlciA9IG5ldyBNYXA8c3RyaW5nLEhUTUxDb2xsZWN0aW9uT2Y8RWxlbWVudD4+KClcclxuXHJcblx0XHRjb25zdCBkZWJvdW5jZWRBY3RpdmVMZWFmQ2hhbmdlID0gZGVib3VuY2UoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmluaXRpYWxpc2VMZWFmRmlsZSgpO1xyXG5cdFx0XHR0aGlzLmxvZ0xlYWZDaGFuZ2VzKGZhbHNlLCB0aGlzLnByb2Nlc3NMZWF2ZXMoZmFsc2UpKTtcclxuXHRcdFx0Ly9sZXQgaG92ZXJOb3RlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5jb250YWluZXJFbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaG92ZXItcG9wb3ZlclwiKTtcclxuXHRcdCAgfSwgMTAwKTtcclxuXHJcblx0XHQvLy8qRmlsZSBPcGVuaW5nIChvcGVuIGZpbGUgYmVjb21lcyBhY3RpdmUsIGNhbiBiZSB1c2UgZm9yIGNsb3NpbmcgYnkgY2hlY2tpbmcgcHJldmlvdXMgYWN0aXZlIGxlYWYpXHJcblx0XHRcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKGxlYWYpID0+IHsvL3doZW4gYWN0aXZlIGxlYWYgaXMgY2hhbmdlZFxyXG5cdFx0XHQvL0luc3RlYWQgb2YgdXNpbmcgbXkgcHJldmlvdXMgYXBwcm9hY2ggb2YgaGFuZGxpbmcgZXZlcnl0aGluZyB0aHJvdWdoIGV2ZXJ5IHNpbmdsZSBhY3Rpb24gb24gZWFjaCBldmVudCwgb25seSBjaGFuZ2UgdGhlIHNwZWNpZmljcyBpbiBoZXJlIFxyXG5cdFx0XHR0aGlzLmluaXRpYWxpc2VMZWFmRmlsZSgpO1xyXG5cclxuXHRcdFx0aWYgKGxlYWYgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdC8vZ2V0IHRoZSBpbmRleCBvZiB0aGUgbmV3IGN1cnJlbnQgYWN0aXZlIGxlYWZcclxuXHRcdFx0XHRsZXQgbmV3QWN0aXZlSW5kZXggPSB0aGlzLmxlYWZGaWxlcy5maW5kSW5kZXgobGVhZmRhdGEgPT4gbGVhZmRhdGEuY3VyTGVhZiA9PT0gbGVhZik7XHJcblxyXG5cdFx0XHRcdC8vZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBhY3RpdmUgbGVhZlxyXG5cdFx0XHRcdGxldCBsYXN0QWN0aXZlID0gdGhpcy5sZWFmRmlsZXMuZmluZChsZWFmZGF0YSA9PiBsZWFmZGF0YS5hY3RpdmUgPT09IHRydWUpO1xyXG5cdFx0XHRcdGxldCBsYXN0QWN0aXZlSW5kZXggPSB0aGlzLmxlYWZGaWxlcy5maW5kSW5kZXgobGVhZmRhdGEgPT4gbGVhZmRhdGEuYWN0aXZlID09PSB0cnVlKTtcclxuXHJcblx0XHRcdFx0Ly90aGlzIHNldHMgdGhlIGFjdGl2ZSBsZWFmIHRoZSBuZXcgYWN0aXZlIGxlYWYgdG8gdHJ1ZVxyXG5cdFx0XHRcdHRoaXMubGVhZkZpbGVzW25ld0FjdGl2ZUluZGV4XS5hY3RpdmUgPSB0cnVlO1xyXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGluZGVlZCBhIGxhc3QgYWN0aXZlIGxlYWZcclxuXHRcdFx0XHRpZihsYXN0QWN0aXZlICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdC8vdGhlbiBzZXQgbGFzdGxlYWYgdG8gdGhhdCBsZWFmIHlvdSBmb3VuZFxyXG5cdFx0XHRcdFx0dGhpcy5sZWFmRmlsZXNbbGFzdEFjdGl2ZUluZGV4XS5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHRoaXMubGVhZkZpbGVzW25ld0FjdGl2ZUluZGV4XS5sYXN0TGVhZiA9IGxhc3RBY3RpdmUuY3VyTGVhZjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly9pZiB0aGVyZSBpcyBubyBsZWFmIGFjdGl2ZSwgY2xvc2UgYWxsIG9wZW4gbm90ZXMgKGJ1dCB0aGVuIGNvbWVzIHRoZSBwcm9ibGVtLCB0aGF0IG9uIHRoZSBjbG9zaW5nIG9mIHRoZSBtYWluIGxlYWYgbm90ZSxcclxuXHRcdFx0XHQvL1x0IGl0IHdpbGwgYmUgZW1wdHksIHdoaWNoIHdpbGwgYWxzbyBtYWtlIGFjdGl2ZSBsZWFmIG51bGwsIHVubGVzcyBJIGp1c3QgZG9uJ3QgZG8gdGhhdCksIGkgY291bnQgaXQgYXMgb3BlbiBmb3IgYXMgbG9uZyBhcyBJIGRvbid0IGNsb3NlIGl0XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHJcblx0XHQvL09wZW5pbmcgYW5kIGNsb3NpbmcgKHdoZW4gY2hhbmdpbmcgdXAgdGhlIGxheW91dCwgY2xvc2luZyB0YWJzLCBjcmVhdGluZyBuZXcgc3BsaXRzIGV0Yy4pXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LWNoYW5nZVwiLCAoKSA9PiB7Ly9XaGVuIHlvdSBjaGFuZ2UgdGhlIGxheW91dCBvZiB0aGUgd29ya3NwYWNlXHJcblx0XHRcdC8vY29uc29sZS5sb2coXCJMYXlvdXQgY2hhbmdlXCIpO1xyXG5cdFx0XHRkZWJvdW5jZWRBY3RpdmVMZWFmQ2hhbmdlKCk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0Ly9GaWxlIE9wZW5pbmcgYW5kIGNsb3NpbmcgKG1haW5seSBmb3Igc2lkZWJhcnMpXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwicmVzaXplXCIsICgpID0+IHsvL1doZW4geW91IHJlc2l6ZSBhbnkgY29tcG9uZW50IGluIHRoZSB3b3Jrc3BhY2VcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcInJlc2l6ZVwiKTtcclxuXHRcdFx0ZGVib3VuY2VkQWN0aXZlTGVhZkNoYW5nZSgpO1xyXG5cdFx0fSkpLy8qL1xyXG5cclxuXHRcdC8vRmlsZSBPcGVuaW5nXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlOlRGaWxlKSA9PiB7Ly9XaGVuIHlvdSBvcGVuIGEgZmlsZSAobm9ybWFsIG9wZW4gZmlsZSBub3QgY3VzdG9tIG9uZSBJIHdhbnQpXHJcblx0XHRcdC8vY29uc29sZS5sb2coXCJmaWxlIG9wZW5cIik7XHJcblx0XHRcdGRlYm91bmNlZEFjdGl2ZUxlYWZDaGFuZ2UoKTtcclxuXHRcdH0pKTtcclxuXHJcblx0XHQvL3RoaXMuYXBwLi5wbHVnaW5zLnBsdWdpbnNbXCJvYnNpZGlhbi1ob3Zlci1lZGl0b3JcIl0uYWN0aXZlUG9wb3ZlcnMgIFxyXG5cclxuXHRcdC8qXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihcImxpbmstaG92ZXJcIixcclxuXHRcdFx0Y29uc29sZS5sb2coJ2hvdmVyJylcclxuXHRcdCk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2VvdmVyJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCdjbGljaycsIGV2dCk7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ21vdXNlb3ZlcicsIGV2dC50YXJnZXQuKTtcclxuXHRcdFx0Ly9sZXQgbGVhZkVsID0gYXBwLndvcmtzcGFjZS5jb250YWluZXJFbC5maW5kKFwiLmhvdmVyLXBvcG92ZXJcIik7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ0hvdmVyIEVsZW1lbnQ6ICcsbGVhZkVsKTtcclxuXHRcdFx0Ly9sZXQgYWxsTGVhdmVzID0gYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKTtcclxuXHJcblx0XHRcdGNvbnN0IHRhcmdldEVsID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHJcblx0XHRcdC8qYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwibGluay1ob3ZlclwiLCB7XHJcblx0XHRcdFx0ZXZlbnQ6IGV2dCxcclxuXHRcdFx0XHQvL3NvdXJjZTogLFxyXG5cdFx0XHRcdGhvdmVyUGFyZW50OiB0YXJnZXRFbC5wYXJlbnRFbGVtZW50LFxyXG5cdFx0XHRcdHRhcmdldEVsLFxyXG5cdFx0XHRcdC8vbGlua3RleHQ6IGN1cnJGaWxlLnBhdGgsXHJcblx0XHRcdH0pOypcclxuXHJcblx0XHRcdGFwcC53b3Jrc3BhY2UudFxyXG5cdFx0XHRcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ21vdXNlb3V0JywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwibm90IGhvdmVyaW5nIGFueW1vcmVcIilcclxuXHRcdH0pOy8vKi9cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0Ly8gI2VuZHJlZ2lvblxyXG5cclxuXHQvLyAjcmVnaW9uIExlYWZGaWxlIEZ1bmN0aW9uc1xyXG5cclxuXHQvKlxyXG5cdGdldCBhbGwgdGhlIGxlYXZlcyB0aGF0IGN1cnJlbnRseSBleGlzdCBhbmQgYXJlIHZpZXdhYmxlIGFuZCBhZGQgdGhlbSB0byBhcnJheSwgaWYgdGhleSBhcmVuJ3QgaW4gdGhlcmUgeWV0LCB0aGVuIGFkZCB0aGVtIG5ld2x5LCB3aXRoIGluaXRpYWxpc2VkIHZhbHVlc1xyXG5cdCovXHJcblx0aW5pdGlhbGlzZUxlYWZGaWxlKCkge1xyXG5cdFx0Ly9sZXQgbGVhZkZpbGVzOkxlYWZGaWxlc1tdID0gW107XHJcblx0XHQvL0ZpcnN0IEkgd2FudCB0byBnZXQgYWxsIHRoZSB2aXNpYmxlIGxlYXZlcyBjdXJyZW50bHkgaW4gdGhlIHdvcmtzcGFjZSB3aW5kb3dcclxuXHRcdGxldCBhbGxMZWF2ZXMgPSB0aGlzLmdldFZpc2libGVMZWF2ZXModGhpcy5nZXRMZWFmc0luV29ya3NwYWNlKCkpOy8vdGhpcy5nZXRWaXNpYmxlTGVhdmVzKHRoaXMuZ2V0TGVhZnNJbldvcmtzcGFjZSgpKTtcclxuXHJcblx0XHQvL2ZvciBldmVyeSBleGlzdGluZyBsZWFmXHJcblx0XHRmb3IgKGxldCBsZWFmID0gMDsgbGVhZiA8IGFsbExlYXZlcy5sZW5ndGg7IGxlYWYrKykge1xyXG5cdFx0XHRsZXQgdGhpc0xlYWYgPSBhbGxMZWF2ZXNbbGVhZl07XHJcblx0XHRcdFxyXG5cdFx0XHRsZXQgdGhpc0xlYWZEYXRhID0gdGhpcy5sZWFmRmlsZXMuZmluZCggKGxlYWZkYXRhKSA9PiBsZWFmZGF0YS5jdXJMZWFmID09PSB0aGlzTGVhZilcclxuXHRcdFx0Ly9pZiB0aGUgbGVhZiBpcyBub3QgYWxyZWFkeSBiZWVuIGFkZGVkIHRvIGxlYWZGaWxlc1xyXG5cdFx0XHRpZiAodGhpc0xlYWZEYXRhID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRcdGxldCBuZXdMZWFmOkxlYWZGaWxlcyA9IHtcclxuXHRcdFx0XHRcdGN1ckxlYWY6dGhpc0xlYWYsXHJcblx0XHRcdFx0XHRsYXN0TGVhZjp1bmRlZmluZWQsXHJcblx0XHRcdFx0XHRjdXJGaWxlOnVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdGN1clR5cGU6XCJlbXB0eVwiLFxyXG5cdFx0XHRcdFx0cHJldkZpbGU6dW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0cHJldlR5cGU6XCJlbXB0eVwiLFxyXG5cdFx0XHRcdFx0YWN0aXZlOmZhbHNlLFxyXG5cdFx0XHRcdFx0bG9nZ2VkOlt0cnVlLCB0cnVlXSxcclxuXHRcdFx0XHRcdGludmlldzp0cnVlLFxyXG5cdFx0XHRcdFx0Ly86ZmFsc2VcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vaWYgY2FuIGZpbmQgY3VycmVudCBsZWFmLCBpbiB2aXNpYmxlIGxlYXZlc1xyXG5cdFx0XHRcdHRoaXMubGVhZkZpbGVzLnB1c2gobmV3TGVhZik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9lbHNlIGlmIGl0IGFscmVhZHkgZXhpdHNcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qXHJcblx0aWYgYSBsZWFmIGhhcyBjaGFuZ2VkIGZyb20gaG93IGl0IHdhcyBiZWZvcmUsIHVwZGF0ZSB0aGUgZGV0YWlscyBzdG9yZWQgYWJvdXQgdGhhdCBsZWFmXHJcblx0Ki9cclxuXHRwcm9jZXNzTGVhdmVzKGVuZDpib29sZWFuKTpudW1iZXJbXSB7Ly8gc3RhcnQ6Ym9vbGVhbiwgZW5kOmJvb2xlYW5cclxuXHRcdC8vbGV0IG5ld0xlYWZGaWxlczpMZWFmRmlsZXNbXSA9IFtdO1xyXG5cdFx0Ly9jaGVjayB3aGF0IHRoZSBhY3RpdmUgbGVhZiBjdXJyZW50bHkgaXNcclxuXHRcdC8vbGV0IGFjdGl2ZUxlYWYgPSBsZWFmRmlsZXMuZmluZCggbGVhZmRhdGEgPT4gbGVhZmRhdGEuYWN0aXZlID09PSB0cnVlKTtcclxuXHRcdGxldCBhbGxMZWF2ZXMgPSB0aGlzLmdldExlYWZzSW5Xb3Jrc3BhY2UoKTtcclxuXHRcdGxldCB2aXNpYmxlTGVhdmVzID0gdGhpcy5nZXRWaXNpYmxlTGVhdmVzKGFsbExlYXZlcyk7XHJcblx0XHQvL2ZpbmQgdGhlIGZpbGUgb2NjdXJlbmNlcyBvZiBlYWNoIGZpbGUgYWN0aXZlIGluIHRoZSBsZWFmXHJcblxyXG5cdFx0bGV0IGRlbGV0ZUxlYWZGaWxlOm51bWJlcltdID0gW107XHJcblx0XHRsZXQgb2NjY3VyZW5jZXMgPSB0aGlzLmdldE9wZW5GaWxlSW5zdGFuY2VzKHZpc2libGVMZWF2ZXMpOy8vc2V0IG9jY3VyZW5jZXMgb2YgdGhlIGZpbGUgeW91IGFyZSB0cnlpbmcgdG8gY2xvc2VcclxuXHJcblx0XHRmb3IgKGxldCBsZWFmID0gMDsgbGVhZiA8IHRoaXMubGVhZkZpbGVzLmxlbmd0aDsgbGVhZisrKSB7XHJcblx0XHRcdGxldCBsZWFmZGF0YSA9IHRoaXMubGVhZkZpbGVzW2xlYWZdO1xyXG5cdFx0XHRsZXQgdmlld2FibGUgPSB2aXNpYmxlTGVhdmVzLmZpbmQodmlzaWJsZUxlYWYgPT4gdmlzaWJsZUxlYWYgPT09IGxlYWZkYXRhLmN1ckxlYWYpOy8vaWYgY3VycmVudCBsZWFmIGlzIHZpc2libGU/XHJcblx0XHRcdFxyXG5cdFx0XHQvL2lmIHRoZXJlIGhhcyBiZWVuIGEgY2hhbmdlIGluIHRoZSBmaWxlIHNob3duIGluIHRoZSBsZWFmLCBvciB0aGUgdHlwZSBvZiB0aGUgbGVhZiBoYXMgY2hhbmdlZCwgYW5kIHRoZSBsZWFmIGNhbiBiZSBmb3VuZCBpbiB0aGUgd29ya3NwYWNlXHJcblx0XHRcdGlmICgobGVhZmRhdGEuY3VyRmlsZSAhPT0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKT8uc3RhdGUuZmlsZSB8fCBsZWFmZGF0YS5jdXJUeXBlICE9IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkudHlwZSkgfHwgXHJcblx0XHRcdChsZWFmZGF0YS5pbnZpZXcgPT09IHRydWUgJiYgdmlld2FibGUgPT09IHVuZGVmaW5lZCkgfHwgKGxlYWZkYXRhLmludmlldyA9PT0gZmFsc2UgJiYgdmlld2FibGUgIT09IHVuZGVmaW5lZCkgfHwgZW5kID09PSB0cnVlKSB7XHJcblxyXG5cdFx0XHRcdC8vaWYgKGxlYWZkYXRhLmN1ckZpbGUgIT09IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkuc3RhdGU/LmZpbGUgfHwgbGVhZmRhdGEuY3VyVHlwZSAhPSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpLnR5cGUpIHtcclxuXHRcdFx0XHRsZWFmZGF0YS5sb2dnZWQgPSBbdHJ1ZSwgdHJ1ZV07Ly9zZXQgbGVhZiBmb3IgbmVlZGluZyB1cGRhdGluZ1xyXG5cclxuXHRcdFx0XHQvL2ZpbmQgd2hldGhlciB0aGVyZSBpcyBhbiBvY2N1cmVuY2Ugb2YgdGhlIG5ldyBmaWxlIGluIHRoZSBsZWFmRmlsZXMgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIG1hZGUgaW4gdmlld1xyXG5cdFx0XHRcdGxldCBuZXdGaWxlT2NjdXJlbmNlID0gdGhpcy5sZWFmRmlsZXMuZmluZChsZWFmRGF0YSA9PiBsZWFmRGF0YS5jdXJGaWxlID09PSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpPy5zdGF0ZS5maWxlICYmIGxlYWZEYXRhLmludmlldyA9PT0gdHJ1ZSAmJiBsZWFmRGF0YS5jdXJUeXBlID09PSBcIm1hcmtkb3duXCIgJiYgbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKT8udHlwZSA9PT0gXCJtYXJrZG93blwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL2lmIHRoZXJlIGFyZSBubyBvY2N1cmVuY2VzIG9mIHRoYXQgZmlsZSBpbiBsZWFmRmlsZXMgaW52aWV3XHJcblx0XHRcdFx0aWYgKG5ld0ZpbGVPY2N1cmVuY2UgPT09IHVuZGVmaW5lZCAmJiBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpPy50eXBlID09IFwibWFya2Rvd25cIiAmJiAobGVhZmRhdGEuY3VyRmlsZSAhPT0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSB8fCBsZWFmZGF0YS5pbnZpZXcgPT09IGZhbHNlKSkge1xyXG5cdFx0XHRcdFx0bGVhZmRhdGEubG9nZ2VkWzBdID0gZmFsc2U7Ly9zZXQgbGVhZiBmb3IgbmVlZGluZyBsb2dzIGZvciB0aGUgYWN0aW9uIG9mIG9wZW5pbmdcclxuXHRcdFx0XHRcdGxlYWZkYXRhLmludmlldyA9IHRydWU7Ly9zZXQgdG8gdHJ1ZSBmb3IgdGhhdCBsZWFmXHJcblxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly9pZiB0aGVyZSBhcmUgbm8gb2NjdXJlbmNlcyBvZiB0aGUgY3VycmVudCBmaWxlIHNvbWV3aGVyZSBlbHNlIGFuZCB5b3UgYXJlIHRyeWluZyB0byBjbG9zZSBpdFxyXG5cdFx0XHRcdGlmICggKGxlYWZkYXRhLmN1ckZpbGUgIT09IHVuZGVmaW5lZCAmJiBvY2NjdXJlbmNlcy5nZXQobGVhZmRhdGEuY3VyRmlsZSkgPT09IHVuZGVmaW5lZCB8fCB2aWV3YWJsZSA9PT0gdW5kZWZpbmVkKSAmJiBsZWFmZGF0YS5jdXJUeXBlID09IFwibWFya2Rvd25cIikge1xyXG5cdFx0XHRcdFx0bGVhZmRhdGEuaW52aWV3ID0gZmFsc2U7Ly9zZXQgdmlldyBmb3IgdGhhdCBsZWFmL2ZpbGUgdG8gZmFsc2UgZm9yIHRoYXQgbGVhZlxyXG5cclxuXHRcdFx0XHRcdGxldCBvbGRGaWxlT2NjdXJlbmNlID0gdGhpcy5sZWFmRmlsZXMuZmluZChsZWFmRGF0YSA9PiBsZWFmRGF0YS5jdXJGaWxlID09PSBsZWFmZGF0YS5jdXJGaWxlICYmIGxlYWZEYXRhLmludmlldyA9PT0gdHJ1ZSk7XHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKG9sZEZpbGVPY2N1cmVuY2UpO1xyXG5cdFx0XHRcdFx0aWYgKG9sZEZpbGVPY2N1cmVuY2UgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHRsZWFmZGF0YS5sb2dnZWRbMV0gPSBmYWxzZTsvL3NldCBsZWFmIGZvciBuZWVkaW5nIHVwZGF0aW5nXHJcblxyXG5cdFx0XHRcdFx0XHRpZiAodmlld2FibGUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vdGhpcy5sZWFmRmlsZXMuc3BsaWNlKGxlYWYsMSk7XHJcblx0XHRcdFx0XHRcdFx0ZGVsZXRlTGVhZkZpbGUucHVzaChsZWFmKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGVuZCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0aWYgKGxlYWZkYXRhLmN1ckZpbGUgIT09IHVuZGVmaW5lZCAmJiBvY2NjdXJlbmNlcy5nZXQobGVhZmRhdGEuY3VyRmlsZSkgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB2YWx1ZXMgZm9yIGZpbGVzIGFuZCB0eXBlc1xyXG5cdFx0XHRcdFx0XHRsZWFmZGF0YS5wcmV2RmlsZSA9IGxlYWZkYXRhLmN1ckZpbGU7XHJcblx0XHRcdFx0XHRcdGxlYWZkYXRhLnByZXZUeXBlID0gbGVhZmRhdGEuY3VyVHlwZTtcclxuXHRcdFx0XHRcdFx0bGVhZmRhdGEuY3VyRmlsZSA9IGxlYWZkYXRhLmN1ckxlYWYuZ2V0Vmlld1N0YXRlKCkuc3RhdGU/LmZpbGU7XHJcblx0XHRcdFx0XHRcdGxlYWZkYXRhLmN1clR5cGUgPSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpLnR5cGU7XHJcblx0XHRcdFx0XHRcdG9jY2N1cmVuY2VzLnNldChsZWFmZGF0YS5jdXJGaWxlLCB1bmRlZmluZWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChlbmQgPT09IGZhbHNlKXtcclxuXHRcdFx0XHRcdC8vdXBkYXRlIHZhbHVlcyBmb3IgZmlsZXMgYW5kIHR5cGVzXHJcblx0XHRcdFx0XHRsZWFmZGF0YS5wcmV2RmlsZSA9IGxlYWZkYXRhLmN1ckZpbGU7XHJcblx0XHRcdFx0XHRsZWFmZGF0YS5wcmV2VHlwZSA9IGxlYWZkYXRhLmN1clR5cGU7XHJcblx0XHRcdFx0XHRsZWFmZGF0YS5jdXJGaWxlID0gbGVhZmRhdGEuY3VyTGVhZi5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZTtcclxuXHRcdFx0XHRcdGxlYWZkYXRhLmN1clR5cGUgPSBsZWFmZGF0YS5jdXJMZWFmLmdldFZpZXdTdGF0ZSgpLnR5cGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcclxuXHRcdC8vY29uc29sZS5sb2codGhpcy5sZWFmRmlsZXMpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyhkZWxldGVMZWFmRmlsZSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlbGV0ZUxlYWZGaWxlO1xyXG5cdH1cclxuXHJcblx0LypcclxuXHRDaGVjayBhbGwgdGhlIGNoYW5nZXMgdGhhdCBoYXZlIGJlZW4gcmVjb3JkZWQgZm9yIG5lZWRpbmcgdXBkYXRlcywgYW5kIHRoZW4gb3V0cHV0IHRoZSByZXN1bHQgb2YgdGhhdFxyXG5cdCovXHJcblx0bG9nTGVhZkNoYW5nZXMoZW5kOmJvb2xlYW4sIGRlbGV0ZWRMZWFmOm51bWJlcltdKSB7XHJcblx0XHQvL2xldCBuZXdMZWFmRmlsZXM6TGVhZkZpbGVzW10gPSBbXTtcclxuXHJcblx0XHQvL2xldCBhbGxMZWF2ZXMgPSB0aGlzLmdldExlYWZzSW5Xb3Jrc3BhY2UoKTtcclxuXHRcdC8vbGV0IHZpc2libGVMZWF2ZXMgPSB0aGlzLmdldFZpc2libGVMZWF2ZXMoYWxsTGVhdmVzKTtcclxuXHRcdC8vbGV0IG9wZW5GaWxlc01hcCA9IHRoaXMuZ2V0T3BlbkZpbGVJbnN0YW5jZXModmlzaWJsZUxlYXZlcyk7XHJcblxyXG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggYWxsIHRoZSBsZWFmcywgdGhhdCBoYXZlIGhhZCBjaGFuZ2VzXHJcblx0XHRmb3IgKGxldCBsZWFmID0gMDsgbGVhZiA8IHRoaXMubGVhZkZpbGVzLmxlbmd0aDsgbGVhZisrKSB7XHJcblx0XHRcdGxldCBsZWFmZGF0YSA9IHRoaXMubGVhZkZpbGVzW2xlYWZdO1xyXG5cdFx0XHQvL2xldCB2aWV3YWJsZSA9IHRoaXMuZ2V0VmlzaWJsZUxlYXZlcyhhbGxMZWF2ZXMpLmZpbmQodmlzaWJsZUxlYWYgPT4gdmlzaWJsZUxlYWYgPT09IGxlYWZkYXRhLmN1ckxlYWYpOy8vY2hlY2tzIGlmIGxlYWYgaXMgY3VycmVudGx5IHZpZXdhYmxlXHJcblxyXG5cdFx0XHQvL3Jld29yayBsb2dpYyBmb3IgY2xvc2luZyBhbGwgb3BlbiBmaWxlc1xyXG5cdFx0XHRpZiAoZW5kID09PSB0cnVlICYmIGxlYWZkYXRhLmludmlldyA9PT0gdHJ1ZSAmJiBsZWFmZGF0YS5wcmV2VHlwZSA9PT0gXCJtYXJrZG93blwiKSB7XHJcblx0XHRcdFx0bGVhZmRhdGEubG9nZ2VkWzFdID0gZmFsc2U7XHJcblx0XHRcdFx0bGVhZmRhdGEuaW52aWV3ID0gZmFsc2U7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIkNsb3Npbmcgb3BlbiBmaWxlc1wiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGxlYWZkYXRhLmxvZ2dlZFsxXSA9PT0gZmFsc2UgJiYgbGVhZmRhdGEucHJldkZpbGUgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHRoaXMud3JpdGVDaGFuZ2Vsb2codGhpcy5GaWxlQ2xvc2VMb2cobGVhZmRhdGEucHJldkZpbGUpKTtcclxuXHRcdFx0XHRsZWFmZGF0YS5sb2dnZWRbMV0gPSB0cnVlXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmIChsZWFmZGF0YS5sb2dnZWRbMF0gPT09IGZhbHNlICYmIGxlYWZkYXRhLmN1ckZpbGUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLndyaXRlQ2hhbmdlbG9nKHRoaXMuRmlsZU9wZW5Mb2coIGxlYWZkYXRhLmN1ckZpbGUsIHRoaXMubGVhZkZpbGVzLmZpbmQoZGF0YSA9PiBkYXRhLmN1ckxlYWYgPT09IGxlYWZkYXRhLmxhc3RMZWFmKSApKTtcclxuXHRcdFx0XHRsZWFmZGF0YS5sb2dnZWRbMF0gPSB0cnVlXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Zm9yIChsZXQgZGF0YSA9IGRlbGV0ZWRMZWFmLmxlbmd0aCAtIDE7IGRhdGEgPiAtMTsgZGF0YS0tKSB7XHJcblx0XHRcdHRoaXMubGVhZkZpbGVzLnNwbGljZShkZWxldGVkTGVhZltkYXRhXSwxKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL2NvbnNvbGUubG9nKHRoaXMubGVhZkZpbGVzKTtcclxuXHRcdC8vY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XHJcblx0XHQvL3JldHVybiBkZWxldGVkTGVhZjtcclxuXHR9XHJcblxyXG5cdC8vI2VuZHJlZ2lvbiBcclxuXHJcblx0Ly8gI3JlZ2lvbiBGaWxlIFdyaXRpbmdcclxuXHJcblx0Ly9Mb2cgYnVpbGRpbmcgTG9naWNcclxuXHJcblx0YXN5bmMgd3JpdGVJbkZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdCAgXHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoZmlsZSwgY29udGVudCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0ICBcdG5ldyBOb3RpY2UoXCJDb3VsZG4ndCB3cml0ZSBOb3RlIGxvZzogY2hlY2sgdGhlIGZpbGUgcGF0aCwgZmlsZSBtaWdodCBub3QgZXhpc3RcIik7XHJcblx0XHR9XHJcblx0XHQvL2NvbnNvbGUubG9nKGZpbGUsIGNvbnRlbnQpO1xyXG5cdH1cclxuXHJcblx0YnVpbGRDaGFuZ2Vsb2cobG9nVGV4dDpzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0bGV0IGxvZ0Zvcm1hdCA9IFwiW1tkYXRlOjpdIFlZWVktTU0tRERbXV0gW2F0XSBbW3RpbWU6Ol0gSEg6bW06c3NbXV0gW1t0aW1lem9uZTo6XVpbXV1cIjsvLyBbZnJvbV0gW1tsb2NhdGlvbjo6IFxyXG5cclxuXHRcdGxldCBjaGFuZ2Vsb2dDb250ZW50ID0gYGA7XHJcblx0XHRjb25zdCBodW1hblRpbWUgPSB3aW5kb3dcclxuXHRcdFx0Lm1vbWVudCgpXHJcblx0XHRcdC5mb3JtYXQobG9nRm9ybWF0KTsvL1tkYXRlOjogWVlZWS1NTS1ERF0gW3RpbWU6OiBISDptbTpzc11cclxuXHRcdGNoYW5nZWxvZ0NvbnRlbnQgKz0gYC0gJHtodW1hblRpbWV9IFx1MDBCNyAke2xvZ1RleHR9XFxuYDtcclxuXHJcblx0XHRyZXR1cm4gY2hhbmdlbG9nQ29udGVudDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHdyaXRlQ2hhbmdlbG9nKGxvZ1RleHQ6c3RyaW5nKSB7XHJcblx0XHRjb25zdCBsb2cgPSB0aGlzLmJ1aWxkQ2hhbmdlbG9nKGxvZ1RleHQpO1xyXG5cdFx0bGV0IGZpbGUgPSB3aW5kb3cubW9tZW50KCkuZm9ybWF0KHRoaXMuc2V0dGluZ3MubG9nRmlsZVBhdGgpOy8vLnRvU3RyaW5nKCk7XHJcblx0XHQvL2NvbnNvbGUubG9nKGZpbGUpXHJcblx0XHRhd2FpdCB0aGlzLndyaXRlSW5GaWxlKGZpbGUsIGxvZyk7XHJcblx0fVxyXG5cclxuXHQvLyAjZW5kcmVnaW9uXHJcblxyXG5cdC8vT3BlbiBhbmQgQ2xvc2luZyBcclxuXHQvL3N0aWxsIGhhdmUgbm90IGZhY3R1cmVkIGluIGhvdmVyIG9wZW4gbm90ZXNcclxuXHRnZXRMZWFmc0luV29ya3NwYWNlKCk6V29ya3NwYWNlTGVhZltdIHtcclxuXHRcdC8vRmxhdyBpbiBsb2dpYywgc2luY2UgaXQgZG9lc24ndCBjb3VudCBhbGwgdGhlIGxlYXZlcyBpbiBhIGRpZmZlcmVudCB3aW5kb3dcclxuXHRcdC8vZG9lcyBub3QgYWNjb3VudCBmb3IgaG92ZXJpbmcgb3ZlciBmaWxlc1xyXG5cdFx0bGV0IGxlYWZzSW5Xb3Jrc3BhY2U6V29ya3NwYWNlTGVhZltdID0gW107XHJcblxyXG5cdFx0Ly90aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcyhsZWFmID0+IHsgbGVhZnNJbldvcmtzcGFjZS5wdXNoKGxlYWYpOyB9KTtcclxuXHRcdFxyXG5cdFx0Ly9DaGFuZ2VkIHRoaXMgc28gdGhhdCBpbnN0ZWFkIEkgZG9uJ3QgY2FyZSBhYm91dCBvdGhlciB0eXBlcyBvZiBsZWF2ZXMsIGFuZCBpbiB0aGlzIHdheSwgYWxzbyBmaW5kIGFueSBoaWRkZW4gbGVhdmVzIHRoYXQgYXJlbid0IHNob3dpbmcgaW4gdGhlIHdvcmtzcGFjZSBpdGVyYXRlIGFsbFxyXG5cdFx0bGVhZnNJbldvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKTtcclxuXHRcdC8vY29uc29sZS5sb2cobGVhZnNJbldvcmtzcGFjZSk7XHJcblx0XHRyZXR1cm4gbGVhZnNJbldvcmtzcGFjZTtcclxuXHR9XHJcblxyXG5cdGdldFZpc2libGVMZWF2ZXMobGVhZnM6V29ya3NwYWNlTGVhZltdICk6V29ya3NwYWNlTGVhZltdIHtcclxuXHJcblx0XHRsZXQgdmlzaWJsZUxlYWZzOldvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cclxuXHRcdGZvciAobGV0IGxlYWYgPSAwOyBsZWFmIDwgbGVhZnMubGVuZ3RoOyBsZWFmKyspIHtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhpbmRleCk7IC8vIHByaW50cyBpbmRleGVzOiAwLCAxLCAyLCAzXHJcblx0XHRcdC8vY29uc29sZS5sb2coYXJyW2luZGV4XS5nZXREaXNwbGF5VGV4dCgpKTsgLy8gcHJpbnRzIGVsZW1lbnRzOiAxMCwgMjAsIDMwLCA0MFxyXG5cdFx0XHRsZXQgbGVhZlN0eWxlID0gbGVhZnNbbGVhZl0udmlldy5jb250YWluZXJFbC5wYXJlbnRFbGVtZW50Py5zdHlsZS5kaXNwbGF5O1xyXG5cdFx0XHRsZXQgbWFpblNwbGl0ID0gbGVhZnNbbGVhZl0udmlldy5jb250YWluZXJFbC5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50O1xyXG5cclxuXHRcdFx0Ly9pZiAobGVhZnNbbGVhZl0uZ2V0Vmlld1N0YXRlKCkudHlwZSA9PSBcIm1hcmtkb3duXCIpIHtcclxuXHRcdFx0XHRpZihtYWluU3BsaXQ/LmNsYXNzTmFtZS5pbmNsdWRlcyhcIm1vZC1sZWZ0LXNwbGl0XCIpICYmIG1haW5TcGxpdC5zdHlsZS5kaXNwbGF5ID09IFwibm9uZVwiKSB7XHJcblx0XHRcdFx0XHQvL2lmIHRoZSBsZWZ0IHNpZGUgYmFyIGlzIGNvbGxhcHNlZFxyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhsZWFmc1tpbmRleF0uZ2V0Vmlld1N0YXRlKCkuc3RhdGU/LmZpbGUgKyBcIiBpcyBoaWRkZW5cIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYobWFpblNwbGl0Py5jbGFzc05hbWUuaW5jbHVkZXMoXCJtb2QtcmlnaHQtc3BsaXRcIikgJiYgbWFpblNwbGl0LnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpIHtcclxuXHRcdFx0XHRcdC8vaWYgdGhlIHJpZ2h0IHNpZGUgYmFyIGlzIGNvbGxhcHNlZFxyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhsZWFmc1tpbmRleF0uZ2V0Vmlld1N0YXRlKCkuc3RhdGU/LmZpbGUgKyBcIiBpcyBoaWRkZW5cIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGxlYWZTdHlsZSA9PSBcIm5vbmVcIikge1xyXG5cdFx0XHRcdFx0Ly9pZiB0aGUgbGVhZiBpcyBpbiBiYWNrZ3JvdW5kIChpbnZpc2libGUpXHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGxlYWZzW2luZGV4XS5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSArIFwiIGlzIGhpZGRlblwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAobGVhZnNbbGVhZl0gPT0gdW5kZWZpbmVkKSB7XHJcblx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly9lbHNlIChpZiB2aXNpYmxlIGluIGZvcmVncm91bmQpXHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGxlYWZzW2luZGV4XS5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZSArIFwiIGlzIGluIGZvcmVncm91bmRcIik7XHJcblx0XHRcdFx0XHR2aXNpYmxlTGVhZnMucHVzaChsZWFmc1tsZWFmXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQvL31cclxuXHRcdH0vLyovXHJcblx0XHQvL2NvbnNvbGUubG9nKHZpc2libGVMZWFmcyk7XHJcblx0XHRyZXR1cm4gdmlzaWJsZUxlYWZzO1xyXG5cdH1cclxuXHJcblx0Z2V0T3BlbkZpbGVJbnN0YW5jZXMobGVhdmVzOldvcmtzcGFjZUxlYWZbXSk6IE1hcDxzdHJpbmcsbnVtYmVyPiB7XHJcblxyXG5cdFx0bGV0IGZpbGVJbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPihbXSk7XHJcblx0XHRcclxuXHRcdC8vY29uc3QgZmlsZUluc3RhbmNlczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9XHJcblxyXG5cdFx0Zm9yIChsZXQgbGVhZiA9IDA7IGxlYWYgPCBsZWF2ZXMubGVuZ3RoOyBsZWFmKyspIHtcclxuXHRcdFx0Ly9UaGlzIGlzIHdoYXQgaXMgY2F1c2luZyB1bmRlZmluZWQgZXJyb3Igb24gY2xvc2Ugb2Ygbm90ZVxyXG5cdFx0XHQvL3doZW4gdGhlIGxlYWYgaXMgZGVzdHJveWVkIG9yIG5vdCB0aGVpciBhbnltb3JlIChhbHNvIGNsb3NlIG5vdGUgZXZlbnQpLCB5b3UgY2FudCByZWFkIHRoZSB2aWV3c3RhdGUgc2luY2UgaXQgaXNuJ3Qgdmlld2FibGVcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGxlYXZlc1tsZWFmXS5nZXRWaWV3U3RhdGUoKS5zdGF0ZT8uZmlsZTsgXHJcblx0XHRcdGNvbnN0IHR5cGUgPSBsZWF2ZXNbbGVhZl0uZ2V0Vmlld1N0YXRlKCkudHlwZVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGZpbGVJbnN0YW5jZXMuaGFzKGZpbGUpICYmIGZpbGUgIT0gdW5kZWZpbmVkICYmIHR5cGUgPT0gXCJtYXJrZG93blwiKSB7XHJcblx0XHRcdFx0Ly9maWxlSW5zdGFuY2VzW2ZpbGVdKys7XHJcblx0XHRcdFx0bGV0IG51bSA9IGZpbGVJbnN0YW5jZXMuZ2V0KGZpbGUpICsgMTtcclxuXHRcdFx0XHRmaWxlSW5zdGFuY2VzLmRlbGV0ZShmaWxlKTtcclxuXHRcdFx0XHRmaWxlSW5zdGFuY2VzLnNldChmaWxlLCBudW0pO1xyXG5cdFx0XHR9IFxyXG5cdFx0XHRlbHNlIGlmIChmaWxlICE9IHVuZGVmaW5lZCl7XHJcblx0XHRcdFx0Ly9maWxlSW5zdGFuY2VzLnB1c2goeyB9KVxyXG5cdFx0XHRcdC8vZmlsZUluc3RhbmNlc1tmaWxlXSA9IDA7XHJcblx0XHRcdFx0ZmlsZUluc3RhbmNlcy5zZXQoZmlsZSwxKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL1RoaXMgY29uZGl0aW9uIGlzIG5lYXJseSByaWdodFxyXG5cdFx0XHRcdC8vZmlsZUluc3RhbmNlcy5zZXQoZmlsZUFsdCwxKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmaWxlSW5zdGFuY2VzO1xyXG5cdH1cclxuXHJcblx0Ly8gI3JlZ2lvbiBMb2cgRnVuY3Rpb25zXHJcblx0XHJcblx0Ly9PcGVuaW5nIGFuZCBjbG9zaW5nIGZpbGVzIGRvbmUsIGFwYXJ0IGZyb20gaG92ZXIgb3BlbiBmaWxlLCBhbmQgbG9naWMgZm9yIGhhdmluZyBzY3JlZW4gYXZhaWxhYmxlIGJ1dCBvYnNpZGlhbiB0YWJiZWQgb3V0IGFuZCBtdWx0aSBtb25pdG9yIG1vZGVcclxuXHQvL0kgdGhpbmsgb2JzaWRpYW4gaW4gZm9yZWdyb3VuZCBpcyBzb21ldGhpbmcgdGhhdCBpcyBtb3JlIG9mIGEgc3lzdGVtIHNwZWNpZmljIGFjdGlvbiBzbyBtaWdodCBoYXZlIHRvIGlnbm9yZSB0aGF0IGZvciBub3cgYnV0IGluY2x1ZGUgY29uZGl0aW9uIGZvciBubyBsZWFmcyBhY3RpdmUgYXQgYWxsICh1bmRlZmluZWQpXHJcblxyXG5cdC8vW2FjdGlvbjo6IHN0YXJ0LCBlbmQsIG9wZW4sIGNsb3NlLCBjcmVhdGUsIG1vZGlmeSwgZGVsZXRlLCBtb3ZlXVxyXG5cdC8vW21ldGhvZDo6IGNvbW1hbmQsIGxpbmtdXHJcblx0Ly9pZiB0aHJvdWdoIGxpbmsgb3IgaWYgY29tbWFuZCBiYXNlZCBvbiBhIGNlcnRhaW4gcGFnZVxyXG5cdC8vW29yaWdpbjo6IFtbbm90ZSBsaW5rXV0sIGZpbGUgZXhwbG9yZXIsIGJhY2sgbGlua3MsIGdyYXBoXVxyXG5cclxuXHQvLyBMb2dpYyBmb3Igb3BlbmluZyBhbmQgY2xvc2luZyBmaWxlc1xyXG5cdC8vIG9wZW5lZCBmaWxlIGhhcyBleHRyYSBjb25kaXRvbmFsIHN0YXRlIChtYXJrZG93biAmIG90aGVyKSwgKGlmIG1hcmtkb3duLCBzaG93IGZpbGUgZnJvbSlcclxuXHQvLy0gW1tGaWxlXV0gT3BlbmVkIHRocm91Z2ggW3ZpZXc6OiB2aWV3VHlwZV0sIFtsaW5rOjogXSBhdCBbZGF0ZTo6IFlZWVktTU0tRERdIFt0aW1lOjogSEg6bW06c3NdXHJcblxyXG5cdEZpbGVPcGVuTG9nKGZpbGU6c3RyaW5nLCBwcmV2TGVhZkZpbGVzOkxlYWZGaWxlcyB8IHVuZGVmaW5lZCkge1xyXG5cdFx0bGV0IGZpbGVuYW1lID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpPy5uYW1lO1xyXG5cdFx0LypcclxuXHRcdGlmIChwcmV2TGVhZkZpbGVzICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0Ly9sb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZW5hbWUgKyBcIl1dXSAgW2FjdGlvbjo6IE9wZW5lZF1cIjtcclxuXHRcdFx0aWYgKHByZXZMZWFmRmlsZXMuY3VyRmlsZSAhPT0gdW5kZWZpbmVkICYmICkge1xyXG5cdFx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogT3BlbmVkXSB0aHJvdWdoIFttZXRob2Q6OiBcIiArIHByZXZMZWFmRmlsZXMuY3VyVHlwZSArIFwiXSBmcm9tIFtvcmlnaW46OiBbW1wiICsgcHJldkxlYWZGaWxlcy5jdXJGaWxlICsgXCJdXV1cIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRsb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZW5hbWUgKyBcIl1dXSAgW2FjdGlvbjo6IE9wZW5lZF0gdGhyb3VnaCBbbWV0aG9kOjogXCIgKyBwcmV2TGVhZkZpbGVzLmN1clR5cGUgKyBcIl1cIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRsb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZW5hbWUgKyBcIl1dXSAgW2FjdGlvbjo6IE9wZW5lZF1cIjtcclxuXHRcdH0vLyovXHJcblx0XHRsZXQgbG9nOnN0cmluZztcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmxvZ0xpbmtzID09PSB0cnVlKSB7XHJcblx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogT3BlbmVkXVwiO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxvZyA9ICdbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl0gIFthY3Rpb246OiBPcGVuZWRdJztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvKkxPR0lDIEVSUk9SXHJcblx0XHRcdC8vdGhlcmUgaXMgYSBwcm9ibGVtIHdoZXJlIGlmIEkgcmVhcnJhbmdlIHRoZSBsYXlvdXQsIGl0IHdpbGwgc2F5IHRoYXQgdGhlIG5vdGUgd2FzIG9wZW5lZCBmcm9tIHRoZSB0aGluZyB0aGF0IHJlYXJyYW5nZWQgdGhlIGxheW91dFxyXG5cdFx0XHQvL2luY2x1ZGUgb3BlbmVkIGZyb20gcmliYm9uXHJcblx0XHRcdC8vaW5jbHVkZSBhbHJlYWR5IG9wZW4gaW4gYmFja2dyb3VuZCBzbyBub3Qgb3BlbmVkIGZyb20gYW55d2hlcmUgKGJyb3VnaHQgdG8gZm9yZWdyb3VuZClcclxuXHRcdFx0Ly9pbmNsdWRlIGVsc2UgY29uZGl0aW9uIGZvciBhbnkgZXh0cmEgcGx1Z2luIGFjdGlvbnMgKG9wZW5lZCBmcm9tIHNvIGFuZCBzbyBwbHVnaW4pXHJcblx0XHRcdC8vb3BlbmVkIHRocm91Z2ggY29tbWFuZFxyXG5cclxuXHRcdFx0Ly9PcGVuZWQgZnJvbSAodGhlIG5vdGUgdGhhdCBpdCBjYW1lIGZyb20pXHJcblx0XHRcdFx0Ly9tYXJrZG93biwgZ3JhcGgsIFxyXG5cdFx0XHQvL09wZW5lZCB0aHJvdWdoIChob3cgaXQgd2FzIG9wZW5lZClcclxuXHRcdFx0XHQvL2xpbmssIGNvbW1hbmQsIGJ1dHRvblxyXG5cclxuXHJcblx0XHQqL1xyXG5cclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvLy0gW1tGaWxlXV0gQ2xvc2VkIGF0IFtkYXRlOjogWVlZWS1NTS1ERF0gW3RpbWU6OiBISDptbTpzc11cclxuXHRGaWxlQ2xvc2VMb2coZmlsZTpzdHJpbmcpIHtcclxuXHRcdGxldCBmaWxlbmFtZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKT8ubmFtZTtcclxuXHRcdGxldCBsb2c6c3RyaW5nO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0bG9nID0gXCJbdGFyZ2V0OjogW1tcIiArIGZpbGUgKyBcInxcIiArIGZpbGVuYW1lICsgXCJdXV0gIFthY3Rpb246OiBDbG9zZWRdXCI7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXSAgW2FjdGlvbjo6IENsb3NlZF0nO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbG9nO1xyXG5cdH1cclxuXHJcblx0Ly9Mb2dpYyBmb3IgbW9kaWZ5aW5nIGZpbGVzXHJcblx0Ly8tIFtbRmlsZV1dIE1vZGlmaWVkIGF0IFtkYXRlOjogWVlZWS1NTS1ERF0gW3RpbWU6OiBISDptbTpzc11cclxuXHRGaWxlTW9kaWZ5TG9nKGZpbGU6c3RyaW5nKSB7XHJcblx0XHRsZXQgZmlsZW5hbWUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk/Lm5hbWU7XHJcblx0XHRsZXQgbG9nOnN0cmluZztcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmxvZ0xpbmtzID09PSB0cnVlKSB7XHJcblx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dICBbYWN0aW9uOjogTW9kaWZpZWRdXCI7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bG9nID0gJ1t0YXJnZXQ6OiBcIicgKyBmaWxlICsgJ1wiXV1dICBbYWN0aW9uOjogTW9kaWZpZWRdJztcclxuXHRcdH1cclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvLyBMb2dpYyBmb3IgY3JlYXRpbmcgZmlsZWVzXHJcblx0Ly8tIFtbRmlsZV1dIENyZWF0ZWQgYXQgW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdEZpbGVDcmVhdGVMb2coZmlsZTpzdHJpbmcpIHtcclxuXHRcdGxldCBjcmVhdGVkRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcclxuXHRcdC8vU2hvdWxkIEluY2x1ZGUgdXNlIGNhc2VzIGZvciB0aGUgZGlmZmVyZW50IHR5cGVzIG9mIHRoaW5ncyBjcmVhdGVkLCBlLmcuIGltYWdlLCBmaWxlLCBjYW52YXNcclxuXHRcdGxldCBmaWxlTmFtZSA9IGNyZWF0ZWRGaWxlPy5wYXRoO1xyXG5cdFx0bGV0IHR5cGU6c3RyaW5nO1xyXG5cdFx0bGV0IGxvZzpzdHJpbmc7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0aWYgKGNyZWF0ZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvL2xhdGVyIGxvb2sgaW50byBhZGRpbmcgZGlmZmVyZW50IHR5IHBlcyBtb3JlIHNwZWNpZmljYWxseSBlLmcuIGltYWdlLCBwZGYgb3IgZGlmZmVyZW50aWF0aW5nIGNhbnZhcyBmcm9tIG5vcm1hbCBub3RlXHJcblx0XHRcdFx0aWYgKGNyZWF0ZWRGaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XHJcblx0XHRcdFx0XHR0eXBlID0gXCJOb3RlXCJcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR0eXBlID0gXCJBdHRhY2htZW50XCJcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhjcmVhdGVkRmlsZSwgY3JlYXRlZEZpbGUuZXh0ZW5zaW9uKTtcclxuXHRcdFx0XHRsb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZU5hbWUgKyBcIl1dXSAgW3R5cGU6OiBcIiArIHR5cGUgKyBcIl0gIFthY3Rpb246OiBDcmVhdGVkXVwiO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNyZWF0ZWRGaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdHR5cGUgPSBcIkZvbGRlclwiO1xyXG5cdFx0XHRcdGxvZyA9ICdbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl1dXSAgW3R5cGU6OiAnICsgdHlwZSArICddICBbYWN0aW9uOjogQ3JlYXRlZF0nO1xyXG5cdFx0XHR9ZWxzZSB7XHJcblx0XHRcdFx0dHlwZSA9IFwiT3RoZXJcIjtcclxuXHRcdFx0XHRsb2cgPSBcIlt0YXJnZXQ6OiBbW1wiICsgZmlsZSArIFwifFwiICsgZmlsZU5hbWUgKyBcIl1dXSAgW3R5cGU6OiBcIiArIHR5cGUgKyBcIl0gIFthY3Rpb246OiBDcmVhdGVkXVwiO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0aWYgKGNyZWF0ZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvL2xhdGVyIGxvb2sgaW50byBhZGRpbmcgZGlmZmVyZW50IHR5IHBlcyBtb3JlIHNwZWNpZmljYWxseSBlLmcuIGltYWdlLCBwZGYgb3IgZGlmZmVyZW50aWF0aW5nIGNhbnZhcyBmcm9tIG5vcm1hbCBub3RlXHJcblx0XHRcdFx0aWYgKGNyZWF0ZWRGaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XHJcblx0XHRcdFx0XHR0eXBlID0gXCJOb3RlXCJcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR0eXBlID0gXCJBdHRhY2htZW50XCJcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoY3JlYXRlZEZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcblx0XHRcdFx0dHlwZSA9IFwiRm9sZGVyXCI7XHJcblx0XHRcdH1lbHNlIHtcclxuXHRcdFx0XHR0eXBlID0gXCJPdGhlclwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGxvZyA9ICdbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl1dXSAgW3R5cGU6OiAnICsgdHlwZSArICddICBbYWN0aW9uOjogQ3JlYXRlZF0nO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbG9nO1xyXG5cdH1cclxuXHJcblx0Ly8gTG9naWMgZm9yIHJlbmFtaW5nL21vdmluZyBmaWxlc1xyXG5cdC8vLSBbW09sZEZpbGVQYXRoXV0gcmVuYW1lZCBbW05ld0ZpbGVwYXRoXV0gYXQgW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdEZpbGVNb3ZlTG9nKGZpbGU6c3RyaW5nLCBvbGRGaWxlOnN0cmluZykge1xyXG5cdFx0bGV0IGZpbGVuYW1lID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpPy5uYW1lO1xyXG5cdFx0bGV0IG9sZEZvbGRlclBhdGggPSBvbGRGaWxlLnJlcGxhY2UoJy4qXFwvJywgXCJcIik7XHJcblx0XHRsZXQgbmV3Rm9sZGVyUGF0aCA9IGZpbGUucmVwbGFjZShmaWxlbmFtZSwgXCJcIik7XHJcblxyXG5cdFx0bGV0IGxvZzpzdHJpbmc7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9nTGlua3MgPT09IHRydWUpIHtcclxuXHRcdFx0aWYgKG9sZEZvbGRlclBhdGggPT09IG5ld0ZvbGRlclBhdGggfHwgdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdGxvZyA9IFwiW3RhcmdldC1vbGQ6OiBbW1wiICsgb2xkRmlsZSArIFwiXV1dICBbYWN0aW9uOjogUmVuYW1lZF0gdG8gW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dXCI7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bG9nID0gXCJbdGFyZ2V0LW9sZDo6IFtbXCIgKyBvbGRGaWxlICsgXCJdXV0gIFthY3Rpb246OiBNb3ZlZF0gdG8gW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJ8XCIgKyBmaWxlbmFtZSArIFwiXV1dXCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZiAob2xkRm9sZGVyUGF0aCA9PT0gbmV3Rm9sZGVyUGF0aCkge1xyXG5cdFx0XHRcdGxvZyA9ICdbdGFyZ2V0LW9sZDo6IFwiJyArIG9sZEZpbGUgKyAnXCJdICBbYWN0aW9uOjogUmVuYW1lZF0gdG8gW3RhcmdldDo6IFwiJyArIGZpbGUgKyAnXCJdJztcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRsb2cgPSAnW3RhcmdldC1vbGQ6OiBcIicgKyBvbGRGaWxlICsgJ1wiXSAgW2FjdGlvbjo6IE1vdmVkXSB0byBbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl0nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBsb2c7XHJcblx0fVxyXG5cclxuXHQvKiBMb2dpYyBmb3IgZGVsZXRpbmcgZmlsZXNcclxuXHQtIFtbRmlsZV1dIERlbGV0ZWQgYXQgW2RhdGU6OiBZWVlZLU1NLUREXSBbdGltZTo6IEhIOm1tOnNzXVxyXG5cdFBlcmhhcHMgaW5zdGVhZCBvZiBkb2luZyBhIHdpa2lsaW5rIHRvIHRoZSBub3RlIGluIHRoaXMgY2FzZSwgZG8gYSBcclxuXHRcdEkgY291bGQgdHJlYXQgdGhlIGRlbGV0aW5nIG9mIGEgZmlsZSBhcyBhIG1vdmUsIGFuZCB0aGVuIGp1c3QgY3JlYXRlIGEgdHJhc2ggYmluIGZvbGRlciBsaWtlIEkgd2FzIHRoaW5raW5nIG9mIGRvaW5nIGFueXdheSwgd2hpY2ggY291bGQgYmUgYSBzZXBlcmF0ZSB2YXVsdCwgXHJcblx0XHRzbyBJIG1vdmUgdGhlIG5vdGUgYWxsIHRoZSB3YXkgdG8gYSBkaWZmZXJlbnQgb25lLCB3aXRoIGEgbmV3IGxpbmsgdG8gdGhhdCBsb2NhdGlvbiBzbyBJIGNhbiBzdGlsbCByZWZlciB0byBpdCwgb3Iga2VlcCBhIGZvbGRlciBpbiB0aGUgc2FtZSB2YXVsdCBmb3IgaXQgXHJcblx0XHQobGF0ZXIgb24gbW92ZSBpdCwgYXNzaWduIGEgdHJhc2ggbG9jYXRpb24gaW4gc2V0dGluZ3MsIG9yIHVzZSBzdGFuZGFyZCAudHJhc2ggZm9sZGVyIG9wdGlvbiA9PiBmaW5kIG91dCBob3cgdG8gYWN0aXZhdGUgaW4gc2V0dGluZ3MgPT4gZmlsZXMgYW5kIGxpbmtzIHRhYiBpbiBzZXR0aW5ncyEpKi9cclxuXHRGaWxlRGVsZXRlTG9nKGZpbGU6c3RyaW5nKSB7XHJcblx0XHRsZXQgbG9nOnN0cmluZztcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmxvZ0xpbmtzID09PSB0cnVlKSB7XHJcblx0XHRcdGxvZyA9IFwiW3RhcmdldDo6IFtbXCIgKyBmaWxlICsgXCJdXV0gIFthY3Rpb246OiBEZWxldGVkXVwiO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxvZyA9ICdbdGFyZ2V0OjogXCInICsgZmlsZSArICdcIl0gIFthY3Rpb246OiBEZWxldGVkXSc7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbG9nO1xyXG5cdH1cclxuXHJcblx0Ly8gTG9naWMgZm9yIHRoZSBvYnNpZGlhbiBhcHAgb3BlbmluZyBhbmQgY2xvc2luZ1xyXG5cdC8vRmluZCBvdXQgaG93IHRvIGRvIHRoaXMgb24gc3RhcnQgYW5kIHN0b3BcclxuXHQvL2FkZCBtYXliZSBzZXNzaW9uIGluZm9ybWF0aW9uIGZvciB0aGUgb3RoZXIgbG9ncywgc28gSSBjYW4gdGVsbCBpZiB0aGV5IGJlbG9uZyB0byBhIGNlcnRhaW4gc2Vzc2lvbiBvciBub3QsIGJ1dCB0aGVuIG1heWJlIEkgbmVlZCBtb3JlIHN0YXRlcyB0aGFuIHN0YXJ0IGFuZCBzdG9wcGVkLCBlLmcuIHBhdXNlZCwgcmVzdW1lZCwgYXMgd2VsbFxyXG5cdC8vIGNsb3NlIGFsbCBmaWxlcyBvbiBwYXVzZSwgb3BlbiBhbGwgZmlsZXMgb24gcmVzdW1lXHJcblx0T2JzaWRpYW5TdGFydExvZygpe1xyXG5cdFx0bGV0IGxvZyA9IFwiW3RhcmdldDo6IE9ic2lkaWFuXSAgW2FjdGlvbjo6IFN0YXJ0ZWRdXCI7XHJcblx0XHRyZXR1cm4gbG9nO1xyXG5cdH1cclxuXHJcblx0T2JzaWRpYW5TdG9wTG9nKCkge1xyXG5cdFx0bGV0IGxvZyA9IFwiW3RhcmdldDo6IE9ic2lkaWFuXSAgW2FjdGlvbjo6IFN0b3BwZWRdXCI7XHJcblx0XHRyZXR1cm4gbG9nO1xyXG5cdH1cclxuXHQvLyAjZW5kcmVnaW9uXHJcbn1cclxuXHJcbmNsYXNzIFNhbXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBPYnNpZGlhbk5vdGVMb2c7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE9ic2lkaWFuTm90ZUxvZykge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvKm5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2V0dGluZyAjMScpXHJcblx0XHRcdC5zZXREZXNjKCdJdFxcJ3MgYSBzZWNyZXQnKVxyXG5cdFx0XHQuYWRkVGV4dCggKHRleHQpID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgc2VjcmV0JylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcclxuXHRcdFx0LnNldE5hbWUoJ0xvZyBGaWxlIEZvbGRlcicpXHJcblx0XHRcdC5zZXREZXNjKCdUaGUgbG9jYXRpb24gZm9yIHN0b3JpbmcgTG9nJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcblx0XHRcdFx0LmFkZE9wdGlvbnMoe1xyXG5cdFx0XHRcdFx0dGhpcy5hcHAudmF1bHRcclxuXHRcdFx0XHRcdFx0LmdldEFsbExvYWRlZEZpbGVzKClcclxuXHRcdFx0XHRcdFx0LmZpbHRlcigoZikgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpXHJcblx0XHRcdFx0XHRcdC5tYXAoKGYpID0+IGYucGF0aCkuXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3RlRm9ybWF0KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxvZ0ZpbGVQYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7Ki9cclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0xvZyBGaWxlIEZvcm1hdCcpXHJcblx0XHRcdC5zZXREZXNjKCdUaGUgZm9ybWF0IGZvciB0aGUgbG9nIGZpbGUnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IEZvbGRlci9sb2cubWQnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dGaWxlUGF0aClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dGaWxlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0xpbmtzIG9yIFN0cmluZ3MnKVxyXG5cdFx0XHQuc2V0RGVzYygnV2hldGhlciB0byBoYXZlIGxpbmtzIHRvIGZpbGVzIGVuYWJsZWQgb3IganVzdCB0aGUgcGF0aHMgdG8gZmlsZXMnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCAodG9nZ2xlKSA9PiB0b2dnbGVcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubG9nTGlua3MpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubG9nTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQXVCTztBQXlCUCxJQUFNLG1CQUFvQztBQUFBLEVBQ3pDLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLGlCQUFpQjtBQUFBLEVBQ2pCLFVBQVU7QUFDWDtBQUVBLElBQXFCLGtCQUFyQixjQUE2Qyx1QkFBTztBQUFBLEVBQXBEO0FBQUE7QUFHQyxxQkFBeUIsQ0FBQztBQUFBO0FBQUE7QUFBQSxFQUkxQixNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQXlEeEIsU0FBSyxjQUFjLElBQUksaUJBQWlCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFdkQsU0FBSyxJQUFJLFVBQVUsY0FBZSxNQUFNO0FBRXZDLFdBQUssc0JBQXNCO0FBQzNCLFdBQUssbUJBQW1CO0FBQ3hCLFdBQUssZUFBZSxPQUFPLEtBQUssY0FBYyxLQUFLLENBQUM7QUFHcEQsV0FBSyx3QkFBd0I7QUFBQSxJQUM5QixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsV0FBVztBQUVWLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssZUFBZSxNQUFNLEtBQUssY0FBYyxJQUFJLENBQUM7QUFFbEQsU0FBSyxlQUFlLEtBQUssZ0JBQWdCLENBQUM7QUFBQSxFQUMzQztBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9B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
